- id: '1580629680844'
  alias: Turn on Hallway light with Motion
  description: ''
  triggers:
  - to: 'on'
    entity_id:
    - binary_sensor.hallway_motion
    trigger: state
    from:
  - type: opened
    device_id: 032e6037fba540ad8ee0d4423212ae9f
    entity_id: binary_sensor.samjin_multi_ddd30701_ias_zone
    domain: binary_sensor
    trigger: device
  - type: opened
    device_id: f869521faf88bd898c7c0f6cca2fb94a
    entity_id: 65312a63db44ea82e99ac2d2169c8c6e
    domain: binary_sensor
    trigger: device
  conditions:
  - condition: state
    entity_id: input_boolean.its_dark
    state: 'on'
  - condition: device
    type: is_off
    device_id: a3c94166f05f3c37cb016a3dd08dae8d
    entity_id: b7b639411b6aaa8ce8e76a5bd057dcbd
    domain: light
  actions:
  - action: light.turn_on
    target:
      device_id:
      - a3c94166f05f3c37cb016a3dd08dae8d
    data: {}
  mode: restart
- id: '1580631052994'
  alias: Turn on 1st Landing light with Motion
  description: ''
  triggers:
  - from: 'off'
    to: 'on'
    entity_id: binary_sensor.1st_landing_trisensor_motion_2
    trigger: state
  - type: opened
    device_id: 032ea9311bed59034952b9ccccc64c86
    entity_id: binary_sensor.bathroom_door_ias_zone
    domain: binary_sensor
    trigger: device
  conditions:
  - condition: state
    entity_id: input_boolean.its_dark
    state: 'on'
  actions:
  - action: light.turn_on
    target:
      device_id: e2d20d0afdb63319d4a238d68ee03177
    data: {}
  mode: single
- id: '1580660725532'
  alias: Turn on lights when Front door opens
  description: ''
  triggers:
  - type: opened
    device_id: 032e6037fba540ad8ee0d4423212ae9f
    entity_id: binary_sensor.samjin_multi_ddd30701_ias_zone
    domain: binary_sensor
    trigger: device
  conditions:
  - condition: and
    conditions:
    - below: 50
      condition: numeric_state
      entity_id: sensor.garden_light_motion_sensor_illuminance
  actions:
  - action: light.turn_on
    target:
      device_id:
      - a3c94166f05f3c37cb016a3dd08dae8d
    data: {}
  mode: single
- id: '1580662218243'
  alias: Turn off 1st Landing light
  description: ''
  triggers:
  - type: turned_off
    device_id: fa9d88895c01447236790872b7f46cc3
    entity_id: binary_sensor.1st_landing_trisensor_motion_2
    domain: binary_sensor
    for:
      hours: 0
      minutes: 1
      seconds: 0
    trigger: device
  - type: turned_off
    device_id: 072ff3730b8f3dc637a8eee93e351341
    entity_id: binary_sensor.stairway_trisensor_motion
    domain: binary_sensor
    for:
      hours: 0
      minutes: 1
      seconds: 0
    trigger: device
  conditions:
  - condition: device
    type: is_on
    device_id: e2d20d0afdb63319d4a238d68ee03177
    entity_id: 79c3b243a355f0d5951eff26cba06b1b
    domain: switch
  actions:
  - data: {}
    target:
      device_id: e2d20d0afdb63319d4a238d68ee03177
    enabled: false
    action: switch.toggle
  - action: light.turn_off
    target:
      device_id: e2d20d0afdb63319d4a238d68ee03177
    data: {}
  mode: single
- id: '1580662385610'
  alias: Arm away immediate
  description: ''
  triggers:
  - entity_id: group.household
    to: not_home
    trigger: state
  conditions: []
  actions:
  - entity_id: alarm_control_panel.blink_home
    action: alarm_control_panel.alarm_arm_away
  - data: {}
    target:
      entity_id: input_boolean.away_mode
    action: input_boolean.turn_on
  - action: media_player.media_stop
    metadata: {}
    data: {}
    target:
      device_id: a3267ebbe2764c6989d5ebe1d7b9554a
  - action: switch.turn_off
    metadata: {}
    target:
      entity_id:
      - switch.xmas_lights
      - switch.xmas_lights_2
    data: {}
  mode: single
- id: '1580662467114'
  alias: Arm items Home
  description: ''
  triggers:
  - entity_id: group.household
    to: home
    trigger: state
  conditions: []
  actions:
  - entity_id: alarm_control_panel.blink_home
    action: alarm_control_panel.alarm_disarm
  - data: {}
    target:
      entity_id:
      - input_boolean.light_replay_enabled
      - input_boolean.away_mode
    action: input_boolean.turn_off
  - action: script.sonos_play_radio_x
    metadata: {}
    data: {}
  mode: single
- id: '1580663686647'
  alias: Blink Image Update
  description: ''
  trigger:
  - at: '11:59:00'
    platform: time
  condition:
  - condition: time
    weekday:
    - sat
  action:
  - service: script.1580663632136
    data: {}
- id: '1580664084018'
  alias: Turn off lights when Front Door Shuts and no one is home
  description: ''
  trigger:
  - platform: state
    entity_id: person.adrian_chapman
    to: hot_home
    for: 00:02:00
  condition: []
  action:
  - service: script.1580666130293
    data: {}
  mode: single
- id: '1580665959396'
  alias: Turn on Kitchen Radio AM
  description: ''
  trigger:
  - entity_id: media_player.bedroom_sonos
    platform: state
    to: playing
  condition:
  - after: 05:55:00
    before: 06:30
    condition: time
  action:
  - data: {}
    entity_id: script.1581635745828
    service: script.turn_on
  mode: single
- id: '1580666301543'
  alias: Turn on Kitchen Lights AM
  description: ''
  triggers:
  - device_id: ed654175c0254d6fb94bd6cdf6015db3
    domain: media_player
    entity_id: media_player.bedroom_sonos
    type: playing
    trigger: device
  conditions:
  - condition: state
    entity_id: person.adrian_chapman
    state: home
  - condition: state
    entity_id: input_boolean.its_dark
    state: 'on'
  actions:
  - data: {}
    action: script.1580666071205
  - delay:
      hours: 0
      minutes: 35
      seconds: 0
      milliseconds: 0
  - data: {}
    action: script.1580666130293
  mode: single
- id: '1580666423343'
  alias: Turn off Hallway light
  description: ''
  triggers:
  - type: turned_off
    device_id: 533a5aaab8fe12982ce62f61886d8417
    entity_id: binary_sensor.hallway_motion
    domain: binary_sensor
    for:
      hours: 0
      minutes: 2
      seconds: 0
    trigger: device
  - type: turned_off
    device_id: 072ff3730b8f3dc637a8eee93e351341
    entity_id: binary_sensor.stairway_trisensor_motion
    domain: binary_sensor
    for:
      hours: 0
      minutes: 2
      seconds: 0
    trigger: device
  conditions:
  - condition: device
    type: is_on
    device_id: a3c94166f05f3c37cb016a3dd08dae8d
    entity_id: fd4a56ca5443d87abae437d573ba4349
    domain: switch
  - condition: state
    entity_id: light.shelly1minig3_dcda0ce268cc_switch_0
    state: 'on'
  actions:
  - action: light.turn_off
    data: {}
    target:
      entity_id:
      - light.shelly1minig3_dcda0ce268cc_switch_0
  mode: single
- id: '1580799177527'
  alias: Turn off lights when household member not home
  description: ''
  trigger:
  - entity_id: person.adrian_chapman
    from: home
    platform: state
    to: not_home
  condition: []
  action:
  - service: script.1580666130293
- id: '1580799345030'
  alias: Turn off kitchen Sonos AM
  description: ''
  triggers:
  - at: 07:41:00
    trigger: time
  conditions:
  - condition: state
    entity_id: media_player.kitchen_sonos_sonos
    state:
    - playing
  actions:
  - data: {}
    entity_id: media_player.kitchen_sonos_sonos
    action: media_player.media_pause
  mode: single
- id: '1581362458095'
  alias: Turn on lights when Adrian is home
  description: ''
  triggers:
  - type: opened
    device_id: 032e6037fba540ad8ee0d4423212ae9f
    entity_id: binary_sensor.samjin_multi_ddd30701_ias_zone
    domain: binary_sensor
    trigger: device
  conditions:
  - condition: and
    conditions:
    - condition: state
      entity_id: group.household
      state: home
    - below: '2'
      condition: numeric_state
      entity_id: sun.sun
      value_template: '{{state.attributes.elevation}}'
    - condition: device
      type: is_off
      device_id: a67dedf134ee2f4bbc2865fe5b237f69
      entity_id: 471485bbf41dd72c6313a6c854f02b0a
      domain: light
  actions:
  - action: light.turn_on
    target:
      device_id:
      - a3c94166f05f3c37cb016a3dd08dae8d
    data: {}
  - data: {}
    entity_id: script.1580666071205
    enabled: false
    action: script.turn_on
  mode: single
- id: '1581611181917'
  alias: Certificate expiry hassio
  description: ''
  triggers:
  - at: 01:01
    trigger: time
  conditions:
  - condition: numeric_state
    entity_id: sensor.hassio_x1ade_co_uk_cert_expiry
    below: '10'
  actions:
  - data:
      message: The certificate {{state_attr('sensor.hassio_x1ade_co_uk_cert_expiry',
        'friendly_name')}} expires in {{states('sensor.hassio_x1ade_co_uk_cert_expiry')}}
        days
      title: Hassio certificate expiry
    action: notify.email_alert
  mode: single
- id: '1581886653226'
  alias: Turn off lights PM
  description: ''
  triggers:
  - entity_id:
    - media_player.sony_bravia_tv_2
    for:
      hours: 0
      minutes: 5
      seconds: 0
    from: standby
    to: 'off'
    trigger: state
  conditions:
  - condition: or
    conditions:
    - condition: device
      type: is_on
      device_id: 7e6278f5278b4cb592a626fadb78caa3
      entity_id: f863d28c2b146db49ebbbd738991eb15
      domain: light
  - below: '0'
    condition: numeric_state
    entity_id: sun.sun
    value_template: '{{state.attributes.elevation}}'
  actions:
  - action: script.1580666130293
    data: {}
  mode: single
- id: '1582145864638'
  alias: Turn off Living room stand light PM
  description: ''
  triggers:
  - entity_id:
    - media_player.sony_bravia_tv_2
    for:
      hours: 0
      minutes: 2
      seconds: 0
    to: 'off'
    trigger: state
  conditions:
  - after: '21:00:00'
    before: 00:00:00
    condition: time
  - condition: state
    entity_id: input_boolean.its_dark
    state:
    - 'on'
  actions:
  - type: turn_off
    device_id: a67dedf134ee2f4bbc2865fe5b237f69
    entity_id: 471485bbf41dd72c6313a6c854f02b0a
    domain: light
  - device_id: d8a7eb3f4ead49fcb85273cf51fe4e72
    domain: light
    entity_id: light.sengled_z01_a60eae27_b62f0403_level_light_color_on_off
    type: turn_off
  mode: single
- id: '1583001303502'
  alias: Turn on utility light when door is opened
  description: ''
  triggers:
  - type: opened
    device_id: c33dbf1eafe24278abefb95d577acb93
    entity_id: binary_sensor.samjin_multi_102c1301_ias_zone
    domain: binary_sensor
    trigger: device
  conditions:
  - condition: state
    entity_id: input_boolean.its_dark
    state:
    - 'on'
  actions:
  - data: {}
    target:
      device_id: 7c026c8c9726b611dd65ab57a9cf7c8e
    action: light.turn_on
  mode: single
- id: '1583001449358'
  alias: Turn off utility light when door is shut
  description: ''
  trigger:
  - type: not_opened
    platform: device
    device_id: c33dbf1eafe24278abefb95d577acb93
    entity_id: binary_sensor.samjin_multi_102c1301_ias_zone
    domain: binary_sensor
    for:
      hours: 0
      minutes: 10
      seconds: 0
  condition: []
  action:
  - data: {}
    service: light.turn_off
    target:
      device_id: 7c026c8c9726b611dd65ab57a9cf7c8e
  mode: parallel
  max: 10
- id: '1583001731782'
  alias: Turn off utility lights if door left open
  description: ''
  triggers:
  - type: opened
    device_id: c33dbf1eafe24278abefb95d577acb93
    entity_id: binary_sensor.samjin_multi_102c1301_ias_zone
    domain: binary_sensor
    for:
      hours: 0
      minutes: 3
      seconds: 0
    trigger: device
  conditions:
  - condition: or
    conditions:
    - condition: state
      entity_id: light.utility_light_switch
      state:
      - 'on'
  actions:
  - data: {}
    target:
      entity_id:
      - light.utility_light_switch
    action: light.turn_off
  mode: parallel
  max: 10
- id: '1586016185527'
  alias: Turn on 2nd landing lights with motion
  description: ''
  triggers:
  - to: 'on'
    entity_id: binary_sensor.2nd_landing_trisensor_motion
    trigger: state
  conditions:
  - condition: device
    type: is_off
    device_id: d9a8034756033c0efa1844a4a4486560
    entity_id: c287cfac34445b82c3056e9c55d57853
    domain: switch
  - condition: state
    entity_id: input_boolean.its_dark
    state: 'on'
  actions:
  - action: light.turn_on
    target:
      device_id: d9a8034756033c0efa1844a4a4486560
    data: {}
  mode: single
- id: '1586016368673'
  alias: Turn off 2nd landing light PM
  description: ''
  triggers:
  - type: turned_off
    device_id: e5a6aeb09ff3c7592d55d3efc57942a0
    entity_id: binary_sensor.2nd_landing_trisensor_motion
    domain: binary_sensor
    for:
      hours: 0
      minutes: 2
      seconds: 0
    trigger: device
  - type: no_motion
    device_id: 44b9804a7704420885c30c6da5f0bb98
    entity_id: binary_sensor.samjin_motion_abad0801_ias_zone
    domain: binary_sensor
    for:
      hours: 0
      minutes: 2
      seconds: 0
    trigger: device
  conditions:
  - condition: and
    conditions:
    - condition: time
      after: '13:00'
    - condition: device
      type: is_on
      device_id: d9a8034756033c0efa1844a4a4486560
      entity_id: c287cfac34445b82c3056e9c55d57853
      domain: switch
  actions:
  - action: light.turn_off
    target:
      device_id: d9a8034756033c0efa1844a4a4486560
    data: {}
  mode: single
- id: '1586016875417'
  alias: Turn on hallway light on with Stairway motion
  description: ''
  triggers:
  - to: 'on'
    entity_id: binary_sensor.stairway_trisensor_motion
    trigger: state
  conditions:
  - condition: and
    conditions:
    - condition: device
      type: is_off
      device_id: a3c94166f05f3c37cb016a3dd08dae8d
      entity_id: fd4a56ca5443d87abae437d573ba4349
      domain: switch
    - condition: device
      type: is_on
      device_id: e2d20d0afdb63319d4a238d68ee03177
      entity_id: 79c3b243a355f0d5951eff26cba06b1b
      domain: switch
  actions:
  - action: light.turn_on
    data: {}
    target:
      device_id:
      - a3c94166f05f3c37cb016a3dd08dae8d
- id: '1586017052904'
  alias: Turn on 1st landing light 1st stairway motion
  description: ''
  triggers:
  - to: 'on'
    entity_id:
    - binary_sensor.stairway_trisensor_motion
    trigger: state
    from: 'off'
  conditions:
  - condition: and
    conditions:
    - condition: device
      type: is_off
      device_id: e2d20d0afdb63319d4a238d68ee03177
      entity_id: 12201f94abfa157cb1d8e4359a677e31
      domain: light
    - condition: device
      type: is_on
      device_id: a3c94166f05f3c37cb016a3dd08dae8d
      entity_id: fd4a56ca5443d87abae437d573ba4349
      domain: switch
    - condition: state
      entity_id: input_boolean.its_dark
      state: 'on'
  actions:
  - action: light.turn_on
    target:
      device_id: e2d20d0afdb63319d4a238d68ee03177
    data: {}
  mode: single
- id: '1586608671873'
  alias: System - Let's Encrypt Renewal
  trigger:
    platform: time
    at: 01:25:00
  action:
  - service: hassio.addon_restart
    data:
      addon: core_letsencrypt
- id: '1591809856101'
  alias: Close the blinds when it's dark
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - input_boolean.its_dark
    from:
    to: 'on'
    for:
      hours: 0
      minutes: 10
      seconds: 0
  conditions:
  - condition: time
    after: '15:00:00'
  actions:
  - data: {}
    action: cover.close_cover
    target:
      entity_id:
      - cover.rfy_010101_1
      - cover.dining_venetian
      - cover.rfy_010102_2
      - cover.rfy_010103_1
  mode: single
- id: '1591810014680'
  alias: 'Blinds: Open AM Weekdays'
  description: ''
  triggers:
  - above: '1'
    entity_id: sun.sun
    value_template: '{{state.attributes.elevation}}'
    trigger: numeric_state
  - at: 07:55:00
    trigger: time
  conditions:
  - condition: and
    conditions:
    - above: '0'
      condition: numeric_state
      entity_id: sun.sun
      value_template: '{{state.attributes.elevation}}'
    - condition: state
      entity_id: binary_sensor.workday_sensor
      state: 'on'
    - condition: time
      after: 07:54:59
  actions:
  - data: {}
    target:
      entity_id:
      - cover.rfy_010101_1
      - cover.rfy_010102_2
    action: cover.open_cover
  - action: cover.open_cover_tilt
    metadata: {}
    data: {}
    target:
      entity_id: cover.dining_venetian
  mode: single
- id: '1593442153605'
  alias: Turn on Bedroom Light
  description: ''
  triggers:
  - type: turned_on
    device_id: d8a5050da3b04ebabf51bf6441518d8c
    entity_id: switch.trust_international_b_v_zll_noncolorcontroller_395b8e03_on_off
    domain: switch
    trigger: device
  conditions: []
  actions:
  - action: switch.turn_on
    metadata: {}
    data: {}
    target:
      device_id: e04c36055c27bc8fe3480960b40cfc70
  mode: single
- id: '1593442270420'
  alias: Turn off Bedroom Light
  description: ''
  triggers:
  - device_id: d8a5050da3b04ebabf51bf6441518d8c
    domain: switch
    entity_id: switch.trust_international_b_v_zll_noncolorcontroller_395b8e03_on_off
    type: turned_off
    trigger: device
  conditions: []
  actions:
  - action: switch.turn_off
    metadata: {}
    data: {}
    target:
      device_id: e04c36055c27bc8fe3480960b40cfc70
- id: '1594049810396'
  alias: Turn on 1st landing light 2nd stairway motion
  description: ''
  triggers:
  - entity_id: binary_sensor.samjin_motion_abad0801_ias_zone
    to: 'on'
    trigger: state
  conditions:
  - condition: and
    conditions:
    - condition: device
      type: is_off
      device_id: e2d20d0afdb63319d4a238d68ee03177
      entity_id: 79c3b243a355f0d5951eff26cba06b1b
      domain: switch
    - condition: device
      type: is_on
      device_id: d9a8034756033c0efa1844a4a4486560
      entity_id: c287cfac34445b82c3056e9c55d57853
      domain: switch
  - condition: not
    conditions:
    - condition: state
      entity_id: sensor.season_metrological_2
      state: summer
    - condition: time
      after: 06:00
      before: '19:00'
  actions:
  - action: light.turn_on
    target:
      device_id: e2d20d0afdb63319d4a238d68ee03177
    data: {}
  mode: single
- id: '1596489565862'
  alias: 'Blinds: Open Living Room Blind at 8am'
  description: ''
  triggers:
  - at: 08:00:00
    trigger: time
  conditions: []
  actions:
  - data: {}
    entity_id: cover.rfy_010102_2
    action: cover.open_cover
  mode: single
- id: '1596643777542'
  alias: 'Blinds: Open office blind Workdays pre 8AM not summer'
  description: ''
  triggers:
  - at: 07:45:00
    trigger: time
  conditions:
  - condition: state
    entity_id: binary_sensor.workday_sensor
    state: 'on'
  - condition: not
    conditions:
    - condition: state
      entity_id: sensor.season_metrological_2
      state: Summer
  - condition: state
    state: home
    entity_id: group.household
  actions:
  - entity_id: cover.rfy_010103_1
    action: cover.open_cover
  mode: single
- id: '1600620477487'
  alias: 'Night Mode: On'
  description: ''
  triggers:
  - at: '22:30:00'
    trigger: time
  conditions: []
  actions:
  - data: {}
    entity_id: input_boolean.night_mode
    action: input_boolean.turn_on
  mode: single
- id: '1600620647880'
  alias: 'Night Mode: Off'
  description: ''
  triggers:
  - entity_id: sun.sun
    value_template: '{{state.attributes.elevation}}'
    above: '0'
    trigger: numeric_state
  conditions: []
  actions:
  - data: {}
    entity_id: input_boolean.night_mode
    action: input_boolean.turn_off
  mode: single
- id: '1600620647999'
  alias: detect lights and adjust the brightness when turned on based on time
  triggers:
  - event_type: state_changed
    trigger: event
  conditions:
  - condition: and
    conditions:
    - condition: template
      value_template: '{{ trigger.event.data is not none }}'
    - condition: template
      value_template: '{{ trigger.event.data.entity_id is not none }}'
    - condition: template
      value_template: '{{ trigger.event.data.entity_id.split(''.'')[0] == ''light''}}'
    - condition: template
      value_template: '{{ trigger.event.data.old_state.attributes[''is_hue_group'']
        != true }}'
    - condition: template
      value_template: '{{ trigger.event.data.old_state.attributes[''friendly_name'']
        != ''Living Room Lamp Light'' }}'
    - condition: template
      value_template: '{{ trigger.event.data.old_state.attributes[''friendly_name'']
        != ''Living Room Stand Light'' }}'
    - condition: template
      value_template: '{{ trigger.event.data.old_state.attributes[''friendly_name'']
        != ''Living Room Lights'' }}'
    - condition: template
      value_template: '{{ trigger.event.data.old_state.state == ''off'' }}'
    - condition: template
      value_template: '{{ trigger.event.data.new_state.state == ''on'' }}'
    - condition: template
      value_template: '{{ trigger.event.data.old_state.attributes[''friendly_name'']
        != ''Back Door Light'' }}'
  - condition: template
    value_template: '{{ trigger.event.data.entity_id.split(''_'')[0] != ''living_room_lights_zha_group_0x0004''}}'
  - condition: template
    value_template: '{{ trigger.event.data.entity_id.split(''_'')[0] != ''light.1st_landing_bulb_light_2''}}'
  - condition: template
    value_template: '{{ trigger.event.data.entity_id.split(''_'')[0] != ''light.2nd_landing_light''}}'
  - condition: template
    value_template: '{{ trigger.event.data.entity_id.split(''_'')[0] != ''light.hallway_bulb_light''}}'
  actions:
  - data_template:
      entity_id: '{{ trigger.event.data.entity_id }}'
      brightness: "{% set hour=states(\"sensor.time\").split(':')[0] | int %} {% set
        dayOfWeek=now().weekday()  %} {%- if hour >= 0 and hour < 7 and dayOfWeek
        in [0,1,2,3,4,5,6] -%}\n  15\n{%- elif hour >= 7 and hour < 8 and dayOfWeek
        in [0,1,2,3,4,5,6] -%}\n  150\n{%- elif hour >= 8 and hour < 22 and dayOfWeek
        in [0,1,2,3,4,5,6] -%}\n  255\n{%- elif hour >= 22 and hour < 23 and dayOfWeek
        in [0,1,2,3,4,5,6] -%}\n  75\n{%- elif hour >= 23 and hour < 24 and dayOfWeek
        in [0,1,2,3,4,5,6] -%}\n  15\n{%- else -%}\n  1\n{%- endif %}"
    action: light.turn_on
  mode: parallel
  max: 10
- id: '1604303903971'
  alias: Turn on 2nd landing light 2nd stairway motion
  description: ''
  triggers:
  - entity_id: binary_sensor.samjin_motion_abad0801_ias_zone
    to: 'on'
    trigger: state
  conditions:
  - condition: and
    conditions:
    - condition: device
      type: is_on
      device_id: e2d20d0afdb63319d4a238d68ee03177
      entity_id: 79c3b243a355f0d5951eff26cba06b1b
      domain: switch
    - condition: device
      type: is_off
      device_id: d9a8034756033c0efa1844a4a4486560
      entity_id: c287cfac34445b82c3056e9c55d57853
      domain: switch
  actions:
  - action: light.turn_on
    target:
      device_id: d9a8034756033c0efa1844a4a4486560
    data: {}
  mode: single
- id: '1608710632187'
  alias: 'Blinds: Open Living Room blind AM'
  description: ''
  triggers:
  - above: '1'
    entity_id: sun.sun
    value_template: '{{state.attributes.elevation}}'
    trigger: numeric_state
  - at: 08:00:00
    trigger: time
  conditions:
  - condition: and
    conditions:
    - above: '0'
      condition: numeric_state
      entity_id: sun.sun
      value_template: '{{state.attributes.elevation}}'
    - after: 08:00:00
      condition: time
  actions:
  - data: {}
    entity_id: cover.rfy_010102_2
    action: cover.open_cover
  mode: single
- id: '1609001467798'
  alias: Turn on Back Door Light with motion
  description: ''
  triggers:
  - type: occupied
    device_id: f06ddef4eb1f594deb22aa84cae32c3f
    entity_id: 8305fdb771fc799a659b420edcfe543a
    domain: binary_sensor
    trigger: device
  conditions:
  - condition: and
    conditions:
    - condition: state
      entity_id: group.household
      state: home
    - condition: state
      entity_id: input_boolean.its_dark
      state:
      - 'on'
    - condition: device
      type: is_on
      device_id: 81ac5e800e2b94f94608c4439ccfbb2e
      entity_id: 7e3ccf7f9a5a096d2d7200263ca886e6
      domain: light
  actions:
  - action: switch.turn_on
    data: {}
    target:
      entity_id: switch.back_door_light_switch
  mode: single
- id: '1609867703334'
  alias: 'Blinds: Open office blind Workdays pre 8AM Summer'
  description: ''
  triggers:
  - at: 07:45:00
    trigger: time
  conditions:
  - condition: state
    entity_id: binary_sensor.workday_sensor
    state: 'on'
  - condition: state
    entity_id: sensor.season_metrological_2
    state: summer
  - condition: state
    entity_id: group.household
    state: home
  actions:
  - entity_id: cover.rfy_010103_1
    action: cover.open_cover
  - delay: 00:00:10
  - data: {}
    entity_id: cover.rfy_010103_1
    action: cover.stop_cover
  mode: single
- id: '1612944322118'
  alias: 'Blinds: Open AM Weekends'
  description: ''
  triggers:
  - above: '1'
    entity_id: sun.sun
    value_template: '{{state.attributes.elevation}}'
    trigger: numeric_state
  - at: 08:00:00
    trigger: time
  conditions:
  - condition: and
    conditions:
    - condition: numeric_state
      entity_id: sun.sun
      value_template: '{{state.attributes.elevation}}'
      above: '1'
    - condition: state
      entity_id: binary_sensor.workday_sensor
      state: 'off'
    - condition: time
      after: 07:59:59
      weekday:
      - mon
      - tue
      - wed
      - thu
      - fri
      - sat
      - sun
  - condition: state
    entity_id: group.household
    state: not_home
  actions:
  - data: {}
    target:
      entity_id:
      - cover.rfy_010101_1
      - cover.rfy_010102_2
      - cover.dining_venetian
    action: cover.open_cover
  mode: single
- id: '1618306357743'
  alias: Arm away with delay
  description: ''
  trigger:
  - platform: state
    entity_id: group.household
    to: not_home
    for:
      hours: 10
      minutes: 0
      seconds: 0
  condition: []
  action:
  - service: input_boolean.turn_on
    target:
      entity_id:
      - input_boolean.light_replay_enabled
      - input_boolean.away_mode
    data: {}
  mode: single
- id: '1621941647688'
  alias: Restart Home Assistant Weekly
  description: ''
  trigger:
  - platform: time
    at: '14:00'
  condition:
  - condition: time
    weekday:
    - fri
  action:
  - service: homeassistant.restart
  mode: single
- id: '1634399683922'
  alias: Turn off 2nd landing light AM
  description: ''
  triggers:
  - type: turned_off
    device_id: e5a6aeb09ff3c7592d55d3efc57942a0
    entity_id: binary_sensor.2nd_landing_trisensor_motion
    domain: binary_sensor
    for:
      hours: 0
      minutes: 2
      seconds: 0
    trigger: device
  - type: no_motion
    device_id: 44b9804a7704420885c30c6da5f0bb98
    entity_id: binary_sensor.samjin_motion_abad0801_ias_zone
    domain: binary_sensor
    for:
      hours: 0
      minutes: 2
      seconds: 0
    trigger: device
  conditions:
  - condition: and
    conditions:
    - condition: device
      type: is_on
      device_id: d9a8034756033c0efa1844a4a4486560
      entity_id: c287cfac34445b82c3056e9c55d57853
      domain: switch
    - condition: time
      before: '11:00'
  actions:
  - action: light.turn_off
    target:
      device_id: d9a8034756033c0efa1844a4a4486560
    data: {}
  mode: single
- id: '1634496111728'
  alias: Low battery level detection & notification for all battery sensors
  description: ''
  use_blueprint:
    path: sbyx/low-battery-level-detection-notification-for-all-battery-sensors.yaml
    input:
      day: 0
      actions:
      - data:
          title: Low Battery Warning
          message: 'Low battery warning for: {{sensors}}'
        action: notify.email_alert
      - data:
          title: Low Battery Warning
          message: 'Low battery warning for: {{sensors}}'
        action: notify.mobile_app_sm_s926b
      threshold: 10
- id: '1640188248946'
  alias: Living Room Wallmote Quad Scene Controller
  description: ''
  use_blueprint:
    path: robinsmidsrod/zwavejs-aeon-labs-aeotec-zw130-wallmote-quad-all-scenes-supported.yaml
    input:
      zwavejs_device: 3c5fa67d9172d77675dd2f72e7ee11f4
      tap_top_left_actions:
      - target:
          device_id:
          - d8a7eb3f4ead49fcb85273cf51fe4e72
          - a67dedf134ee2f4bbc2865fe5b237f69
        data:
          transition: 1
          brightness_pct: 100
        action: light.toggle
      tap_top_right_actions:
      - data: {}
        target:
          entity_id: light.yeelight_lamp9_0x1d64e9b8
        action: light.turn_on
      - action: switch.turn_on
        metadata: {}
        data: {}
        target:
          entity_id: switch.lamp
      tap_bottom_left_actions:
      - device_id: 43730e4f6dce450581ccb63a74498ec5
        domain: cover
        entity_id: cover.rfy_010102_2
        type: close
      hold_top_left_actions: []
      hold_bottom_left_actions:
      - device_id: 43730e4f6dce450581ccb63a74498ec5
        domain: cover
        entity_id: cover.rfy_010102_2
        type: open
- id: '1640210116450'
  alias: Turn on Hallway Light when Kitchen door opened
  description: ''
  triggers:
  - type: opened
    device_id: f869521faf88bd898c7c0f6cca2fb94a
    entity_id: binary_sensor.ewelink_ds01_3b174524_ias_zone
    domain: binary_sensor
    trigger: device
  conditions:
  - condition: and
    conditions:
    - condition: or
      conditions:
      - type: is_illuminance
        condition: device
        device_id: 9e1542f5b60ee3aa673c5d1e428f5f5e
        entity_id: 5b9929ee2a0dd41c35e61231055db2e7
        domain: sensor
        below: 50
      - condition: numeric_state
        entity_id: sun.sun
        below: 5
        value_template: '{{state.attributes.elevation}}'
    - condition: device
      type: is_off
      device_id: a3c94166f05f3c37cb016a3dd08dae8d
      entity_id: fd4a56ca5443d87abae437d573ba4349
      domain: switch
  actions:
  - action: light.turn_on
    target:
      device_id:
      - a3c94166f05f3c37cb016a3dd08dae8d
    data: {}
  mode: single
- id: '1664262210155'
  alias: Turn on office light
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - input_boolean.its_dark
    from:
    to:
    - 'on'
    for:
      hours: 0
      minutes: 0
      seconds: 0
  conditions:
  - condition: time
    before: '17:45:00'
  - condition: and
    conditions:
    - condition: state
      entity_id: group.household
      state: home
    - condition: state
      entity_id: binary_sensor.workday_sensor
      state: 'on'
  - condition: or
    conditions:
    - condition: device
      device_id: 53f2d7ae84dda9029b302ab4964858ac
      domain: device_tracker
      entity_id: f7222ab44d473bfb267965b45cddbe5d
      type: is_home
    - condition: device
      device_id: bf5d562e3b70ae562646c93911e7f6c5
      domain: device_tracker
      entity_id: 9a1627d4c76b21b2c1644bec64753f16
      type: is_home
  actions:
  - action: light.turn_on
    target:
      device_id: dccbd2a4d0af9527ffc04944ecdbacdb
    data: {}
  mode: single
- id: '1665162506596'
  alias: 'Blinds: Open Venetian Weekdays Tilt'
  description: ''
  triggers:
  - at: 07:55:00
    trigger: time
  conditions:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_sensor
      state: 'on'
    - condition: time
      before: 08:00:00
      weekday:
      - fri
      - thu
      - wed
      - tue
      - mon
  actions:
  - device_id: 1d1807340bf45e41030fb5d333863644
    domain: cover
    entity_id: cover.dinning_venetian
    type: open_tilt
  mode: single
- id: '1665162674809'
  alias: 'Blinds: Open Venetian Weekends'
  description: ''
  triggers:
  - at: 08:00:00
    trigger: time
  conditions:
  - condition: and
    conditions:
    - condition: state
      entity_id: binary_sensor.workday_sensor
      state: 'off'
    - condition: time
      after: 00:00:00
      weekday:
      - sun
      - sat
      - fri
      - thu
      - wed
      - tue
      - mon
  actions:
  - device_id: 1d1807340bf45e41030fb5d333863644
    domain: cover
    entity_id: cover.dinning_venetian
    type: open
  mode: single
- id: '1666026363419'
  alias: Turn off Office Light if on after 18:00
  description: ''
  trigger:
  - platform: time
    at: '18:00:00'
  condition:
  - condition: state
    entity_id: binary_sensor.workday_sensor
    state: 'on'
  - condition: state
    entity_id: switch.office_light_switch
    state: 'on'
    for:
      hours: 0
      minutes: 15
      seconds: 0
  action:
  - service: switch.turn_off
    metadata: {}
    data: {}
    target:
      device_id: dccbd2a4d0af9527ffc04944ecdbacdb
  mode: single
- id: '1669128667283'
  alias: Home Tablet Power
  description: ''
  triggers:
  - type: battery_level
    device_id: 75db9096f36be66b1311477e1c70f862
    entity_id: eb2b7c648e4b99fe317f980caa77ec4e
    domain: sensor
    trigger: device
    below: 10
  - type: battery_level
    device_id: 90141fb4cd5323f83917ecf7b0ab4509
    entity_id: e421f8d1dd8bd8278ed8633025a7ef46
    domain: sensor
    trigger: device
    below: 10
  conditions: []
  actions:
  - data:
      message: Tablet at 10% power
      title: Tablet at 10% power
    action: notify.mobile_app_sm_s926b
  mode: single
- id: '1670175565860'
  alias: Turn off Stairway Lights after 20 mins
  description: ''
  triggers:
  - type: turned_on
    device_id: a3c94166f05f3c37cb016a3dd08dae8d
    entity_id: fd4a56ca5443d87abae437d573ba4349
    domain: switch
    trigger: device
    id: Hall
    for:
      hours: 0
      minutes: 20
      seconds: 0
  - type: turned_on
    device_id: e2d20d0afdb63319d4a238d68ee03177
    entity_id: 79c3b243a355f0d5951eff26cba06b1b
    domain: switch
    for:
      hours: 0
      minutes: 20
      seconds: 0
    trigger: device
    id: 1st
  - type: turned_on
    device_id: d9a8034756033c0efa1844a4a4486560
    entity_id: c287cfac34445b82c3056e9c55d57853
    domain: switch
    for:
      hours: 0
      minutes: 20
      seconds: 0
    trigger: device
    id: 2nd
  conditions:
  - condition: time
    after: '20:01:00'
    before: 07:00:00
    weekday:
    - sun
    - sat
    - fri
    - thu
    - wed
    - tue
    - mon
  actions:
  - if:
    - condition: trigger
      id:
      - Hall
    then:
    - type: turn_off
      device_id: a3c94166f05f3c37cb016a3dd08dae8d
      entity_id: b7b639411b6aaa8ce8e76a5bd057dcbd
      domain: light
  - if:
    - condition: trigger
      id:
      - 1st
    then:
    - type: turn_off
      device_id: e2d20d0afdb63319d4a238d68ee03177
      entity_id: 12201f94abfa157cb1d8e4359a677e31
      domain: light
  - if:
    - condition: trigger
      id:
      - 2nd
    then:
    - type: turn_off
      device_id: d9a8034756033c0efa1844a4a4486560
      entity_id: e46810b3e0d32d1979c1f95e7ee3f5d7
      domain: light
  mode: single
- id: '1670178691016'
  alias: 'Doorbell: Sonos'
  description: ''
  triggers:
  - type: occupied
    device_id: a7a3cacedd9c5c8f8452e500af0150ff
    entity_id: 2a0adb46891cc99d86f41fae76905d14
    domain: binary_sensor
    trigger: device
    id: doorbell
  - type: turned_on
    device_id: a7a3cacedd9c5c8f8452e500af0150ff
    entity_id: b07ded46e9a3cb519d6f78206a4a59f7
    domain: binary_sensor
    trigger: device
    id: package
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - doorbell
      sequence:
      - parallel:
        - data:
            entity_id: media_player.sonos_one,media_player.bedroom_sonos,media_player.kitchen_sonos_sonos
            message: Ding Dong, Ding Dong. Answer The Door. Ding Dong
            volume_level: 0.2
            min_wait: 5
          action: script.text_to_speech_on_sonos
          enabled: true
        - action: assist_satellite.announce
          metadata: {}
          data:
            message: Doorbell is ringing. Hurry up and answer the door will you.
          target:
            area_id: 6aaf5c95bc6d43e384e05551ea13ccac
    - conditions:
      - condition: trigger
        id:
        - package
      sequence:
      - parallel:
        - data:
            entity_id: media_player.bedroom_sonos,media_player.sonos_one,media_player.kitchen_sonos_sonos
            message: ALERT! A package has been left at the front door
            volume_level: 0.2
            min_wait: 5
          action: script.text_to_speech_on_sonos
          enabled: true
        - action: assist_satellite.announce
          metadata: {}
          data:
            message: ALERT! A package has been left at the front door
          target:
            area_id: 6aaf5c95bc6d43e384e05551ea13ccac
  mode: parallel
  max: 10
- id: '1673368378391'
  alias: Turn on Kitchen lights if back door light on
  description: Turn on the Kitchen lights if the back door light is on and the back
    door is opened.
  triggers:
  - entity_id:
    - binary_sensor.back_door_iaszone
    to: 'on'
    trigger: state
  conditions:
  - condition: state
    entity_id: light.back_door_light_switch
    state: 'on'
  actions:
  - data: {}
    target:
      entity_id:
      - light.kitchen_light_switch_light
    action: light.turn_on
  mode: single
- id: '1675796479301'
  alias: Living Room Cinema Lighting
  description: ''
  triggers:
  - entity_id:
    - media_player.sony_xr_55a84j
    - media_player.living_room_tv
    - media_player.playstation_5
    to:
    - playing
    trigger: state
  - device_id: 59afa03ece1ccde059c49e480c0e477b
    domain: media_player
    entity_id: ec9e1dd98e9a247876bac54e23061d4c
    type: turned_on
    trigger: device
  conditions:
  - condition: and
    conditions:
    - condition: device
      type: is_on
      device_id: a67dedf134ee2f4bbc2865fe5b237f69
      entity_id: 471485bbf41dd72c6313a6c854f02b0a
      domain: light
    - condition: device
      type: is_on
      device_id: d8a7eb3f4ead49fcb85273cf51fe4e72
      entity_id: light.sengled_z01_a60eae27_b62f0403_level_light_color_on_off
      domain: light
  - condition: time
    after: '19:00:00'
    before: 05:00:00
  - condition: not
    conditions:
    - condition: state
      entity_id: media_player.sony_xr_55a84j
      attribute: app_name
      state: YouTube
  - condition: state
    entity_id: input_boolean.its_dark
    state:
    - 'on'
  actions:
  - target:
      entity_id: scene.living_room_cinema_lighting
    metadata: {}
    action: scene.turn_on
    data: {}
  mode: single
- id: '1675796586709'
  alias: Living Room Normal Lighting
  description: ''
  triggers:
  - entity_id:
    - media_player.living_room_tv
    - media_player.sony_bravia_tv_2
    - media_player.sony_xr_55a84j
    - media_player.sony_xr_55a84j_3
    from:
    - playing
    for:
      hours: 0
      minutes: 0
      seconds: 2
    trigger: state
  conditions:
  - condition: and
    conditions:
    - condition: device
      type: is_on
      device_id: a67dedf134ee2f4bbc2865fe5b237f69
      entity_id: 471485bbf41dd72c6313a6c854f02b0a
      domain: light
    - condition: device
      type: is_on
      device_id: d8a7eb3f4ead49fcb85273cf51fe4e72
      entity_id: light.sengled_z01_a60eae27_b62f0403_level_light_color_on_off
      domain: light
  - condition: state
    entity_id: input_boolean.its_dark
    state:
    - 'on'
  actions:
  - target:
      entity_id: scene.living_room_normal_lighting
    metadata: {}
    action: scene.turn_on
    data: {}
  mode: single
- id: '1676530423205'
  alias: Arm Blink on Door Open
  description: ''
  triggers:
  - type: opened
    device_id: 032e6037fba540ad8ee0d4423212ae9f
    entity_id: binary_sensor.samjin_multi_ddd30701_ias_zone
    domain: binary_sensor
    trigger: device
  - type: opened
    device_id: 6a73f09c9eb14353b4e8254e7809d46f
    entity_id: binary_sensor.back_door_iaszone
    domain: binary_sensor
    trigger: device
  conditions:
  - condition: state
    entity_id: group.household
    state: home
  actions:
  - data: {}
    target:
      entity_id: alarm_control_panel.blink_home
    action: alarm_control_panel.alarm_arm_away
  - wait_for_trigger:
    - type: not_opened
      device_id: 032e6037fba540ad8ee0d4423212ae9f
      entity_id: binary_sensor.samjin_multi_ddd30701_ias_zone
      domain: binary_sensor
      trigger: device
    - type: not_opened
      device_id: 6a73f09c9eb14353b4e8254e7809d46f
      entity_id: binary_sensor.back_door_iaszone
      domain: binary_sensor
      trigger: device
  - delay:
      hours: 0
      minutes: 1
      seconds: 0
      milliseconds: 0
  - data: {}
    target:
      entity_id: alarm_control_panel.blink_home
    action: alarm_control_panel.alarm_disarm
  mode: single
- id: '1676530515029'
  alias: Disarm Blink when door closes
  description: ''
  triggers:
  - type: not_opened
    device_id: 032e6037fba540ad8ee0d4423212ae9f
    entity_id: binary_sensor.samjin_multi_ddd30701_ias_zone
    domain: binary_sensor
    trigger: device
  - type: not_opened
    device_id: 6a73f09c9eb14353b4e8254e7809d46f
    entity_id: binary_sensor.back_door_iaszone
    domain: binary_sensor
    trigger: device
  conditions:
  - condition: state
    entity_id: input_boolean.away_mode
    state: 'off'
  - condition: state
    entity_id: group.household
    state: home
  actions:
  - data: {}
    target:
      entity_id: alarm_control_panel.blink_home
    action: alarm_control_panel.alarm_disarm
  mode: single
- id: '1681499961123'
  alias: Flash LR Stand with stair motion
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.1st_landing_trisensor_motion_2
    to: 'on'
  condition:
  - condition: device
    type: is_on
    device_id: d8a7eb3f4ead49fcb85273cf51fe4e72
    entity_id: light.sengled_z01_a60eae27_b62f0403_level_light_color_on_off
    domain: light
  action:
  - service: scene.create
    data:
      scene_id: thebeforetimes
      snapshot_entities: light.sengled_z01_a60eae27_b62f0403_level_light_color_on_off
  - service: light.turn_on
    data:
      transition: 1
      brightness_pct: 49
      flash: long
    target:
      device_id: d8a7eb3f4ead49fcb85273cf51fe4e72
  - delay:
      hours: 0
      minutes: 0
      seconds: 1
      milliseconds: 0
  - service: scene.turn_on
    data: {}
    target:
      entity_id: scene.thebeforetimes
  mode: single
- id: '1681904178075'
  alias: Tell Hannah to get out of bed
  description: ''
  trigger:
  - platform: conversation
    command:
    - Get Out of Bed Hannah
    - Tell Hannah to get out of bed
  condition: []
  action:
  - service: script.tell_hannah_to_get_out_of_bed
    data:
      entity_id: media_player.bedroom_sonos
      message: Hello Hannah my darling. Just a gentle reminder. You should be out
        of bed by now.
      volume_level: 0.2
      min_wait: 2
      max_wait: 3.25
  mode: single
- id: '1684250752810'
  alias: Notify Adrian when away
  description: ''
  triggers:
  - type: occupied
    device_id: 7847d0fd5a1d895eb376ffc24a921e31
    entity_id: binary_sensor.2rm_doorbell_g4_doorbell
    domain: binary_sensor
    trigger: device
  conditions:
  - condition: state
    entity_id: person.adrian_chapman
    state: not_home
  actions:
  - data:
      message: 2RM Doorbell has rung
    action: notify.whatsapp
  mode: single
- id: '1689686844941'
  alias: Turn on Kitchen Cabinet Lights
  description: ''
  triggers:
  - entity_id:
    - light.kitchen_light_switch_light_2
    from: 'off'
    to: 'on'
    trigger: state
  conditions: []
  actions:
  - action: light.turn_on
    target:
      device_id: 7e6278f5278b4cb592a626fadb78caa3
    data: {}
    enabled: false
  - action: switch.turn_on
    metadata: {}
    target:
      device_id: 7e6278f5278b4cb592a626fadb78caa3
    data: {}
  mode: single
- id: '1689686891260'
  alias: Turn off Kitchen Cabinet Lights
  description: ''
  triggers:
  - entity_id:
    - light.kitchen_light_switch_light_2
    from: 'on'
    to: 'off'
    trigger: state
  conditions: []
  actions:
  - action: light.turn_off
    target:
      device_id: 7e6278f5278b4cb592a626fadb78caa3
    data: {}
    enabled: false
  - action: switch.turn_off
    metadata: {}
    target:
      device_id: 7e6278f5278b4cb592a626fadb78caa3
    data: {}
  mode: single
- id: '1695244058250'
  alias: WallMote Quad scenes
  description: ''
  use_blueprint:
    path: robinsmidsrod/zwavejs-aeon-labs-aeotec-zw130-wallmote-quad-all-scenes-supported.yaml
    input:
      zwavejs_device: 3c5fa67d9172d77675dd2f72e7ee11f4
      tap_top_right_actions:
      - data:
          brightness_pct: 100
        action: light.turn_on
        target:
          entity_id: light.yeelight_lamp9_0x1d64e9b8
          device_id: e04c36055c27bc8fe3480960b40cfc70
      - action: switch.turn_on
        metadata: {}
        data: {}
        target:
          entity_id: switch.lamp
        enabled: false
      tap_top_left_actions:
      - data:
          brightness: 255
        target:
          device_id:
          - d8a7eb3f4ead49fcb85273cf51fe4e72
          - a67dedf134ee2f4bbc2865fe5b237f69
        action: light.toggle
      hold_bottom_left_actions:
      - action: cover.close_cover
        target:
          entity_id: cover.rfy_010102_2
        data: {}
      tap_bottom_right_actions:
      - data: {}
        target:
          device_id: 36c2bf048f36d87ee0e11cbc7d175d34
        action: switch.toggle
      tap_bottom_left_actions:
      - action: switch.toggle
        metadata: {}
        data: {}
        target:
          device_id:
          - 74bcd8b68e2df943d4b0c6101c8656cb
          - 7d5e61c0c8600126739996ac019c4728
- id: '1700339669800'
  alias: Turn on living room lights when its dark
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - input_boolean.its_dark
    to: 'on'
    from:
    for:
      hours: 0
      minutes: 10
      seconds: 0
  conditions:
  - condition: or
    conditions:
    - condition: device
      device_id: 77a54e443e0b2cae3cda2af54ff779ec
      domain: media_player
      entity_id: media_player.sony_xr_55a84j
      type: is_on
    - condition: state
      entity_id: media_player.sony_bravia_tv_2
      state: playing
    - condition: state
      entity_id: media_player.sonos_one
      state: playing
    - condition: device
      device_id: 77a54e443e0b2cae3cda2af54ff779ec
      domain: media_player
      entity_id: media_player.sony_xr_55a84j
      type: is_playing
    - condition: device
      type: is_on
      device_id: b8de72e89c262f7f30ea46575150e738
      entity_id: 4429c0e419ebc11660f3cc78cbf97f80
      domain: remote
    - condition: state
      entity_id: switch.ps5_993_power
      state: 'on'
    - condition: device
      device_id: 59afa03ece1ccde059c49e480c0e477b
      domain: media_player
      entity_id: ec9e1dd98e9a247876bac54e23061d4c
      type: is_on
    - condition: state
      entity_id: media_player.sony_xr_55a84j_3
      state: paused
    - condition: state
      entity_id: media_player.living_room_tv
      state:
      - 'on'
    - condition: state
      entity_id: media_player.playstation_5
      state:
      - playing
  actions:
  - target:
      entity_id:
      - light.sengled_z01_a60eae27_b62f0403_level_light_color_on_off
      - light.signify_netherlands_b_v_lwe007
    data:
      brightness_pct: 100
      transition: 2
    action: light.turn_on
  - action: cover.close_cover
    metadata: {}
    data: {}
    target:
      area_id: 78a330ec08974b448c83c7339c6b2018
    enabled: false
  mode: single
- id: '1700344453717'
  alias: Turn off garden light from the garage
  description: ''
  trigger:
  - platform: device
    type: changed_states
    device_id: 489c28314c192a6e1d9a8cbe05b6fba8
    entity_id: d6d40ca45c6f8e5f39ba87fe3af77f2e
    domain: switch
  condition:
  - condition: device
    type: is_on
    device_id: 36c2bf048f36d87ee0e11cbc7d175d34
    entity_id: 992c1b7c5a1312225938f4fc1dc4b41e
    domain: switch
  action:
  - service: switch.turn_off
    data: {}
    target:
      device_id: 36c2bf048f36d87ee0e11cbc7d175d34
  mode: single
- id: '1700344697048'
  alias: Turn on garden light from garage
  description: ''
  trigger:
  - platform: device
    type: turned_on
    device_id: 489c28314c192a6e1d9a8cbe05b6fba8
    entity_id: d6d40ca45c6f8e5f39ba87fe3af77f2e
    domain: switch
  condition:
  - condition: device
    type: is_off
    device_id: 36c2bf048f36d87ee0e11cbc7d175d34
    entity_id: 992c1b7c5a1312225938f4fc1dc4b41e
    domain: switch
  action:
  - data: {}
    target:
      device_id: 36c2bf048f36d87ee0e11cbc7d175d34
    action: switch.turn_on
  mode: single
- id: '1703855762044'
  alias: Turn on garage light when door is opened
  description: ''
  triggers:
  - type: opened
    device_id: 3d908560e73394b1bdfd4106cca2367b
    entity_id: 03a4618c2fa0f7fdff07533ececf5324
    domain: binary_sensor
    trigger: device
  conditions: []
  actions:
  - data: {}
    target:
      entity_id: switch.garage_light_switch_2
    action: switch.turn_on
  mode: single
- id: '1709918266695'
  alias: Weather
  description: ''
  triggers:
  - command:
    - What's the weather forecast
    - What's the weather
    trigger: conversation
  conditions: []
  actions:
  - target:
      entity_id:
      - weather.openweathermap
    data:
      type: hourly
    response_variable: forecast
    action: weather.get_forecasts
  - data:
      cache: true
      media_player_entity_id: media_player.bedroom_sonos, media_player.k
      message: '{% set next = forecast[0] %}

        The forecast for today is

        {{ next.temperature}} degrees and {{ next.condition }} with a

        {{ next.precipitation_probability }} percent chance of precipitation.'
    action: tts.speak
    target:
      entity_id: tts.home_assistant_cloud
  mode: single
- id: '1710875499894'
  alias: Notify Zones
  description: ''
  triggers:
  - entity_id: person.chris_allen
    not_from:
    - unknown
    - unavailable
    not_to:
    - unknown
    - unavailable
    trigger: state
  conditions:
  - condition: template
    value_template: '{{ trigger.from_state.state != trigger.to_state.state }}'
  actions:
  - data_template:
      message: '{{ trigger.to_state.attributes.friendly_name }} {% if trigger.to_state.state
        == ''not_home'' %}left {{ trigger.from_state.state }}{% endif %}{% if trigger.from_state.state
        == ''not_home'' %}arrived at {{ trigger.to_state.state }}{% endif %}'
    action: notify.mobile_app_sm_s926b
  mode: single
- id: '1710876925435'
  alias: Set Adrian S22 DND On
  description: Sets Adrian's S22 to DND in Work zone.
  triggers:
  - entity_id: device_tracker.adrian_s24
    zone: zone.nexus_park
    event: enter
    trigger: zone
  conditions: []
  actions:
  - data:
      message: command_dnd
      data:
        command: priority_only
    action: notify.mobile_app_sm_s926b
  mode: single
- id: '1710876974100'
  alias: Set Adrian S22 DND Off
  description: Sets Adrian's S22 to DND when leaving Work zone.
  triggers:
  - entity_id: device_tracker.adrian_s24
    zone: zone.nexus_park
    event: leave
    trigger: zone
  conditions: []
  actions:
  - data:
      message: command_dnd
      data:
        command: 'off'
    action: notify.mobile_app_sm_s926b
  mode: single
- id: '1721749259230'
  alias: 'Doorbell: Living Room TV'
  description: Opens the doorbell camera onto the Living Room TV when the doorbell
    is pressed.
  triggers:
  - type: occupied
    device_id: a7a3cacedd9c5c8f8452e500af0150ff
    entity_id: 2a0adb46891cc99d86f41fae76905d14
    domain: binary_sensor
    trigger: device
  conditions:
  - condition: or
    conditions:
    - condition: device
      device_id: b8de72e89c262f7f30ea46575150e738
      domain: media_player
      entity_id: b6085cf80c56bb06f8c1d7e03a8fdd8b
      type: is_on
    - condition: device
      type: is_on
      device_id: 19694d37edd138b447f7fb218c80174e
      entity_id: 557def1149d66da651e551402318a885
      domain: remote
    - condition: device
      type: is_on
      device_id: 48a0dae986d97ba64e8aca48f1612eb6
      entity_id: 4d2187e4d12342acdde6a271d8329656
      domain: switch
    - condition: state
      entity_id: media_player.sony_xr_55a84j
      state: 'on'
    - condition: device
      device_id: 59afa03ece1ccde059c49e480c0e477b
      domain: media_player
      entity_id: ec9e1dd98e9a247876bac54e23061d4c
      type: is_on
    - condition: device
      device_id: 77a54e443e0b2cae3cda2af54ff779ec
      domain: media_player
      entity_id: d99ccc696d19e84a7ac07afb7beff0cb
      type: is_on
  actions:
  - target:
      entity_id: media_player.sony_xr_55a84j
    data:
      media:
        media_content_id: media-source://camera/camera.2rm_doorbell_low_resolution_channel
        media_content_type: application/vnd.apple.mpegurl
        metadata:
          title: 2RM Doorbell Low resolution channel
          thumbnail: /api/camera_proxy/camera.2rm_doorbell_low_resolution_channel
          media_class: video
          children_media_class:
          navigateIds:
          - {}
          - media_content_type: app
            media_content_id: media-source://camera
          browse_entity_id: media_player.sony_xr_55a84j
    action: media_player.play_media
  mode: single
- id: '1727442597800'
  alias: 'Assist: Sonos alarm early office'
  description: Sets the bedroom Sonos alarm for 05.30
  triggers:
  - command: I'm opening the office tomorrow
    trigger: conversation
  conditions: []
  actions:
  - type: turn_on
    device_id: ed654175c0254d6fb94bd6cdf6015db3
    entity_id: a0d79ffb2839638050bf8e12ecc36c84
    domain: switch
  - type: turn_off
    device_id: ed654175c0254d6fb94bd6cdf6015db3
    entity_id: 121e8233cd92267dce2daf36a3d25d09
    domain: switch
  - set_conversation_response: OK. I've set the bedroom sonos alarm for five thirty
      and turned off your normal alarm.
  mode: single
- id: '1727445317437'
  alias: 'Assist: Sonos Alarm normal time'
  description: Sets the Sonos alarm for 06.29 weekdays
  triggers:
  - command: I'm going to the office tomorrow
    trigger: conversation
  conditions: []
  actions:
  - type: turn_on
    device_id: ed654175c0254d6fb94bd6cdf6015db3
    entity_id: 121e8233cd92267dce2daf36a3d25d09
    domain: switch
  - set_conversation_response: OK. I've set your Bedroom Sonos alarm for six twenty
      nine tomorrow morning.
  mode: single
- id: '1727446924418'
  alias: Sonos alarm play kitchen Kerrang Radio
  description: ''
  triggers:
  - device_id: ed654175c0254d6fb94bd6cdf6015db3
    domain: media_player
    entity_id: 66eca2d51c26e16c33c2b389871a122d
    type: playing
    trigger: device
  conditions:
  - condition: time
    weekday:
    - fri
    - thu
    - wed
    - tue
    - mon
    after: 05:00:00
    before: 07:00:00
  - condition: state
    state: home
    entity_id: group.household
  actions:
  - action: media_player.play_media
    target:
      entity_id: media_player.kitchen_sonos_sonos
    data:
      media:
        media_content_id: FV:2/26
        media_content_type: favorite_item_id
        metadata:
          title: Kerrang! Radio
          thumbnail: https://dtu8ldmaopof3.cloudfront.net/i/b64aHR0cHM6Ly9tZWRpYS5iYXVlcnJhZGlvLmNvbS9pbWFnZS91cGxvYWQvY19jcm9wLGdfY3VzdG9tL3YxNjE1NTQ3ODY5L2JyYW5kX21hbmFnZXIvc3RhdGlvbnMvZXNhM2dwb3N4M3M2c2E1MnVkOG4uanBn_640.jpg
          media_class: genre
          children_media_class:
          navigateIds:
          - {}
          - media_content_type: favorites
            media_content_id: ''
          - media_content_type: favorites_folder
            media_content_id: object.item.audioItem.audioBroadcast
    enabled: false
  - action: media_player.volume_set
    metadata: {}
    data:
      volume_level: 0.08
    target:
      entity_id:
      - media_player.kitchen_sonos_sonos
    enabled: false
  - delay:
      hours: 0
      minutes: 30
      seconds: 0
      milliseconds: 0
  - action: media_player.media_pause
    metadata: {}
    data: {}
    target:
      entity_id:
      - media_player.kitchen_sonos_sonos
    enabled: false
  - action: input_boolean.turn_on
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.run_hot_water
  mode: single
- id: '1729507382632'
  alias: 'Assist: Open the blinds'
  description: ''
  triggers:
  - trigger: conversation
    command: Open the blinds
  conditions: []
  actions:
  - action: cover.open_cover
    metadata: {}
    data: {}
    target:
      device_id:
      - d2f0b27730c64caf8645cb3a8fdef7d2
      - 1d1807340bf45e41030fb5d333863644
      - 43730e4f6dce450581ccb63a74498ec5
    enabled: true
  - set_conversation_response: OK, I'm opening the kitchen venetian, 1st floor landing
      and living room blinds.
  mode: single
- id: '1730108529661'
  alias: Turn on Garden light with motion
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - binary_sensor.garden_light_motion_sensor_opening
    to: 'on'
    from: 'off'
    enabled: true
  - type: occupied
    device_id: f06ddef4eb1f594deb22aa84cae32c3f
    entity_id: 8305fdb771fc799a659b420edcfe543a
    domain: binary_sensor
    trigger: device
    enabled: false
  - type: occupied
    device_id: 9e1542f5b60ee3aa673c5d1e428f5f5e
    entity_id: 6b916e72812c6aa214240d3785d8433f
    domain: binary_sensor
    trigger: device
    enabled: false
  - trigger: state
    entity_id:
    - binary_sensor.outdoor_sensor_opening
    from:
    - 'off'
    to:
    - 'on'
  conditions:
  - condition: state
    entity_id: input_boolean.its_dark
    state: 'on'
  actions:
  - action: switch.turn_on
    metadata: {}
    data: {}
    target:
      entity_id: switch.back_door_light_switch
    enabled: true
  - action: light.turn_on
    metadata: {}
    data: {}
    target:
      device_id: 36c2bf048f36d87ee0e11cbc7d175d34
    enabled: false
  mode: single
- id: '1730108628143'
  alias: Turn off garden light when motion finishes
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - binary_sensor.garden_light_motion_sensor_opening
    to: 'off'
    from: 'on'
    enabled: true
  - type: not_occupied
    device_id: f06ddef4eb1f594deb22aa84cae32c3f
    entity_id: 8305fdb771fc799a659b420edcfe543a
    domain: binary_sensor
    trigger: device
    enabled: false
  - type: not_occupied
    device_id: 9e1542f5b60ee3aa673c5d1e428f5f5e
    entity_id: 6b916e72812c6aa214240d3785d8433f
    domain: binary_sensor
    trigger: device
    enabled: false
  - trigger: state
    entity_id:
    - binary_sensor.outdoor_sensor_opening
    from:
    - 'on'
    to:
    - 'off'
  conditions:
  - condition: device
    type: is_on
    device_id: 36c2bf048f36d87ee0e11cbc7d175d34
    entity_id: 992c1b7c5a1312225938f4fc1dc4b41e
    domain: switch
  actions:
  - action: light.turn_off
    metadata: {}
    data: {}
    target:
      device_id: 36c2bf048f36d87ee0e11cbc7d175d34
  mode: single
- id: '1730325222937'
  alias: 'Assist: Sonos turn off alarms'
  description: Turns off the bedroom Sonos alarms
  triggers:
  - command: I'm working from home tomorrow
    trigger: conversation
  conditions: []
  actions:
  - type: turn_off
    device_id: ed654175c0254d6fb94bd6cdf6015db3
    entity_id: a0d79ffb2839638050bf8e12ecc36c84
    domain: switch
  - type: turn_off
    device_id: ed654175c0254d6fb94bd6cdf6015db3
    entity_id: 121e8233cd92267dce2daf36a3d25d09
    domain: switch
  - set_conversation_response: 'OK. I''ve turned off the sonos alarms for tomorrow. '
  mode: single
- id: '1730823873878'
  alias: 'Carol : Turn on Radio 2'
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - person.carol_patterson
    from:
    to: home
    for:
      hours: 0
      minutes: 0
      seconds: 0
  conditions:
  - condition: time
    after: 08:00:00
    before: '12:00:00'
  actions:
  - action: media_player.play_media
    target:
      entity_id: media_player.kitchen_sonos_sonos
    data:
      media_content_id: FV:2/39
      media_content_type: favorite_item_id
    metadata:
      title: Radio 2
      thumbnail: https://sounds.files.bbci.co.uk/3.7.0/networks/bbc_radio_two/colour_450x450.png
      media_class: genre
      children_media_class:
      navigateIds:
      - {}
      - media_content_type: favorites
        media_content_id: ''
      - media_content_type: favorites_folder
        media_content_id: object.item.audioItem.audioBroadcast
  - action: media_player.play_media
    target:
      entity_id: media_player.bedroom_sonos
    data:
      media_content_id: FV:2/39
      media_content_type: favorite_item_id
    metadata:
      title: Radio 2
      thumbnail: https://sounds.files.bbci.co.uk/3.7.0/networks/bbc_radio_two/colour_450x450.png
      media_class: genre
      children_media_class:
      navigateIds:
      - {}
      - media_content_type: favorites
        media_content_id: ''
      - media_content_type: favorites_folder
        media_content_id: object.item.audioItem.audioBroadcast
  - action: media_player.play_media
    target:
      entity_id: media_player.sonos_one
    data:
      media_content_id: FV:2/39
      media_content_type: favorite_item_id
    metadata:
      title: Radio 2
      thumbnail: https://sounds.files.bbci.co.uk/3.7.0/networks/bbc_radio_two/colour_450x450.png
      media_class: genre
      children_media_class:
      navigateIds:
      - {}
      - media_content_type: favorites
        media_content_id: ''
      - media_content_type: favorites_folder
        media_content_id: object.item.audioItem.audioBroadcast
  - action: media_player.volume_set
    metadata: {}
    data:
      volume_level: 0.23
    target:
      entity_id:
      - media_player.sonos_one
      - media_player.bedroom_sonos
      - media_player.kitchen_4
  mode: single
- id: '1730824051783'
  alias: 'Carol : Pause Kitchen Sonos'
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - person.carol_patterson
    from: home
    to: not_home
    for:
      hours: 0
      minutes: 1
      seconds: 0
  conditions: []
  actions:
  - action: media_player.media_pause
    metadata: {}
    data: {}
    target:
      entity_id:
      - media_player.bedroom_sonos
      - media_player.sonos_one
      - media_player.kitchen_sonos_sonos
  mode: single
- id: '1734631882873'
  alias: 'Xmas: Turn on lights'
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - group.household
    to:
    - home
  - trigger: state
    entity_id:
    - input_boolean.its_dark
    to:
    - 'on'
    from:
  conditions:
  - condition: state
    entity_id: group.household
    state:
    - home
  - condition: state
    entity_id: input_boolean.its_dark
    state:
    - 'on'
  actions:
  - action: switch.turn_on
    metadata: {}
    data: {}
    target:
      device_id:
      - 74bcd8b68e2df943d4b0c6101c8656cb
      - 7d5e61c0c8600126739996ac019c4728
  mode: single
- id: '1737539650260'
  alias: 'Assist: Turn off bedroom lamps'
  description: ''
  triggers:
  - trigger: conversation
    command:
    - Turn off the bedroom lamps
  - trigger: conversation
    command: Turn off the lamps
  conditions: []
  actions:
  - action: switch.turn_off
    metadata: {}
    data: {}
    target:
      device_id: e04c36055c27bc8fe3480960b40cfc70
    enabled: false
  - action: light.turn_off
    metadata: {}
    data:
      transition: 2
    target:
      device_id:
      - 5b2d269d470db7846b3861b9d8dee8a4
      - e04c36055c27bc8fe3480960b40cfc70
  - action: assist_satellite.announce
    metadata: {}
    data: {}
    target:
      area_id: d18184dcecde4674b20e659605dec5e6
    enabled: false
  mode: single
- id: '1737563982873'
  alias: 'Assist: Turn on the bedroom lamps'
  description: ''
  triggers:
  - trigger: conversation
    command: Turn on the lamps
  - trigger: conversation
    command: Turn on the bedroom lamps
  conditions: []
  actions:
  - action: switch.turn_on
    metadata: {}
    data: {}
    target:
      device_id: e04c36055c27bc8fe3480960b40cfc70
    enabled: false
  - action: light.turn_on
    metadata: {}
    data:
      transition: 5
      brightness_pct: 100
      kelvin: 6500
    target:
      device_id:
      - 5b2d269d470db7846b3861b9d8dee8a4
      - e04c36055c27bc8fe3480960b40cfc70
  - action: assist_satellite.announce
    metadata: {}
    data:
      message: 'Sorry Hannah, I know I''m so annoying, but you''ve got to get over
        the threat. '
    target:
      area_id: d18184dcecde4674b20e659605dec5e6
    enabled: false
  mode: single
- id: '1738342111121'
  alias: 'Heating: Proximity Set Temperature'
  description: ''
  triggers:
  - trigger: numeric_state
    entity_id:
    - sensor.home_nearest_distance
    below: 6000
    id: Approaching
  - trigger: numeric_state
    entity_id:
    - zone.home
    above: 0
    id: Approaching
  - trigger: state
    entity_id:
    - zone.home
    to: '0'
    id: Leaving
  - trigger: numeric_state
    entity_id:
    - sensor.home_nearest_device
    above: 6000
    id: Leaving
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: and
        conditions:
        - condition: trigger
          id:
          - Approaching
        - condition: or
          conditions:
          - condition: state
            entity_id: sensor.home_nearest_direction_of_travel
            state: towards
          - condition: state
            entity_id: sensor.home_nearest_direction_of_travel
            state: arrived
      sequence:
      - action: climate.set_preset_mode
        data:
          preset_mode: home
        enabled: true
        target:
          device_id:
          - 42e6b67cb99dcd916c6f867e25f810f5
          - b9e116145912afbd853c3d85a4943b9e
          - f952ed40cb87c1b890d54b8700725f7e
          - c988fe763d856ade45de5b034e6d2912
          - 7247697def1e8cc3c0c3ebcb5caea21e
          - 919624c4c3a7d41cdc47ea5e8a3ae80e
      - action: notify.mobile_app_sm_s926b
        data:
          message: Location state changed to {{ trigger.to_state.state }} for person.{{trigger.to_state.object_id}}
        enabled: false
      - action: input_boolean.turn_on
        metadata: {}
        data: {}
        target:
          entity_id: input_boolean.turn_on_heating
      - action: input_boolean.turn_off
        metadata: {}
        target:
          entity_id: input_boolean.turn_off_heating
        data: {}
    - conditions:
      - condition: trigger
        id:
        - Leaving
      sequence:
      - action: climate.set_preset_mode
        data:
          preset_mode: away
        enabled: true
        target:
          device_id:
          - 42e6b67cb99dcd916c6f867e25f810f5
          - b9e116145912afbd853c3d85a4943b9e
          - f952ed40cb87c1b890d54b8700725f7e
          - c988fe763d856ade45de5b034e6d2912
          - 7247697def1e8cc3c0c3ebcb5caea21e
          - 919624c4c3a7d41cdc47ea5e8a3ae80e
      - action: notify.mobile_app_sm_s926b
        data:
          message: Location state changed to {{ trigger.to_state.state }} for person.{{trigger.to_state.object_id}}
        enabled: false
      - action: input_boolean.turn_off
        metadata: {}
        data: {}
        target:
          entity_id:
          - input_boolean.turn_on_heating
      - action: input_boolean.turn_on
        metadata: {}
        target:
          entity_id: input_boolean.turn_off_heating
        data: {}
  mode: single
- id: '1742292813251'
  alias: Restart Protect Devices when offline
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - camera.g5_bullet_high_resolution_channel
    to: unavailable
    for:
      hours: 0
      minutes: 5
      seconds: 0
    id: G5Bullet
  - trigger: state
    entity_id:
    - camera.g5_bullet_high_resolution_channel
    to: unknown
    for:
      hours: 0
      minutes: 5
      seconds: 0
    id: G5Bullet
  - trigger: state
    entity_id:
    - device_tracker.unifi_default_1c_0b_8b_da_d3_42
    from:
    to: unavailable
    for:
      hours: 0
      minutes: 5
      seconds: 0
    id: AIPort
  - trigger: state
    entity_id:
    - device_tracker.unifi_default_1c_0b_8b_da_d3_42
    from:
    to: unknown
    id: AIPort
  conditions: []
  actions:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - G5Bullet
      sequence:
      - action: button.press
        metadata: {}
        data: {}
        target:
          entity_id: button.us_8_150w_port_7_power_cycle
    - conditions:
      - condition: trigger
        id:
        - AIPort
      sequence:
      - action: button.press
        metadata: {}
        data: {}
        target:
          entity_id: button.usw_24_poe_port_15_power_cycle
  mode: single
- id: '1743601159106'
  alias: 'Heating: Turn on'
  description: ''
  triggers:
  - trigger: numeric_state
    entity_id:
    - sensor.garden_temperature
    for:
      hours: 0
      minutes: 30
      seconds: 0
    below: 13
    id: Temperature
  - at: 07:00:00
    trigger: time
    id: Time
    enabled: false
    weekday:
    - sat
    - sun
  - trigger: state
    entity_id:
    - climate.bedroom_1
    - climate.bedroom_2
    - climate.bedroom_3
    - climate.bedroom_4
    - climate.kitchen
    - climate.living_room
    to:
    - home
    attribute: preset_mode
    enabled: false
  - trigger: state
    entity_id:
    - input_boolean.its_dark
    to:
    - 'on'
  - trigger: state
    entity_id:
    - sensor.bedroom_1_tado_mode
    - sensor.bedroom_2_tado_mode
    - sensor.bedroom_3_tado_mode
    - sensor.bedroom_4_tado_mode
    - sensor.home_tado_mode
    - sensor.kitchen_tado_mode
    - sensor.living_room_tado_mode
    from:
    to:
    - home
  - trigger: state
    entity_id:
    - input_boolean.turn_on_heating
    from:
    to:
    - 'on'
  conditions:
  - condition: numeric_state
    entity_id: sensor.home_nearest_distance
    below: 2000
  - condition: and
    conditions:
    - condition: time
      before: '22:00:00'
    - condition: numeric_state
      entity_id: sensor.garden_temperature
      below: 13
    - condition: state
      entity_id: input_boolean.its_dark
      state:
      - 'on'
  - condition: not
    conditions:
    - condition: state
      entity_id: sensor.season_metrological_2
      state: summer
  actions:
  - action: climate.turn_on
    metadata: {}
    data: {}
    target:
      label_id:
      - homekit
  - delay:
      hours: 0
      minutes: 1
      seconds: 0
      milliseconds: 0
  - action: climate.set_temperature
    metadata: {}
    data:
      temperature: 20
    target:
      entity_id:
      - climate.living_room
      - climate.bedroom_2
  - action: climate.set_temperature
    metadata: {}
    data:
      temperature: 21
    target:
      entity_id:
      - climate.bedroom_1
      - climate.kitchen
  - action: climate.set_temperature
    metadata: {}
    data:
      temperature: 21
    target:
      entity_id:
      - climate.bedroom_3
      - climate.bedroom_4
  mode: single
- id: '1743784171014'
  alias: 'Heating: Turn Off'
  description: ''
  triggers:
  - trigger: time
    at: '22:00:00'
  - trigger: state
    entity_id:
    - sensor.home_tado_mode
    - sensor.kitchen_tado_mode
    - sensor.bedroom_1_tado_mode
    - sensor.bedroom_2_tado_mode
    - sensor.bedroom_3_tado_mode
    - sensor.bedroom_4_tado_mode
    - sensor.living_room_tado_mode
    - climate.bedroom_1
    - climate.bedroom_2
    - climate.bedroom_3
    - climate.bedroom_4
    - climate.kitchen
    - climate.living_room
    to:
    from:
    - HOME
    enabled: false
  - trigger: state
    entity_id:
    - input_boolean.turn_off_heating
    from:
    to:
    - 'on'
  conditions:
  - condition: state
    entity_id: sensor.home_tado_mode
    state: HOME
    enabled: false
  actions:
  - action: climate.turn_off
    metadata: {}
    data: {}
    target:
      device_id:
      - 27935a028d7b1bb8665f20d339236565
      - bf791d93f975f379d8fe92481e0c4418
      - c4c666a5031b73feb408298e9116d37a
      - eaca2d3005217ce4b9e10cfdb4241aec
      - 219f63a57927dc39896359a0f9fc1ba8
      - f68cddfb3f0cb175ad4f29bec34a0162
      - 6c52d83f190df0820c9d94ce1a8029b0
      - c76fe5e92c284adec99d12de3c29fd08
      - 4a6f503b4be610604220524a46e7d7ec
      - 50ee635cf76608c93707ae50efcac2ab
      - 8ce4e662452aa6f044040e7f79e8a0d6
  - action: input_boolean.turn_off
    metadata: {}
    target:
      entity_id: input_boolean.turn_on_heating
    data: {}
  mode: single
- id: '1743867546748'
  alias: 'Heating: Run Hot Water 1HR'
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - input_boolean.run_hot_water
    from: 'off'
    to: 'on'
  conditions:
  - condition: state
    entity_id: sensor.home_tado_mode
    state: HOME
  actions:
  - action: script.run_hot_water_for_1hr
    metadata: {}
    data: {}
  - action: input_boolean.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.run_hot_water
  mode: single
- id: '1744898462501'
  alias: 'Heating: Hot Water Trigger'
  description: ''
  triggers:
  - trigger: time
    at: '19:30:00'
  - trigger: state
    entity_id:
    - media_player.bedroom_sonos
    from:
    to: playing
    enabled: false
  conditions:
  - condition: state
    entity_id: sensor.home_tado_mode
    state: HOME
  - condition: not
    conditions:
    - condition: template
      value_template: '  {{ states(''sensor.octopus_free_electricity_session_active_in_last_24h'')
        | int > 0 }}'
      alias: If Octopus Free Electricity has been on in last 24H
  actions:
  - action: input_boolean.turn_on
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.run_hot_water
  mode: single
- id: '1747754792264'
  alias: 'Helper: It''s Dark'
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - binary_sensor.g4_instant_is_dark
    - binary_sensor.g5_bullet_is_dark_2
    - binary_sensor.g6_entry_is_dark
    to:
    - 'on'
    from:
    - 'off'
  - trigger: numeric_state
    entity_id:
    - sensor.garden_illuminance
    below: 100
    for:
      hours: 0
      minutes: 15
      seconds: 0
  conditions:
  - condition: time
    after: '14:00:00'
  actions:
  - action: input_boolean.turn_on
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.its_dark
  mode: single
- id: '1747807173778'
  alias: 'Helper: It''s Light'
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - binary_sensor.g4_instant_is_dark
    - binary_sensor.g5_bullet_is_dark_2
    - binary_sensor.g6_entry_is_dark
    to:
    - 'off'
    from:
    - 'on'
  - trigger: numeric_state
    entity_id:
    - sensor.garden_illuminance
    above: 50
    for:
      hours: 0
      minutes: 5
      seconds: 0
  - trigger: time
    at: 07:00:00
  conditions:
  - condition: state
    entity_id: binary_sensor.g5_bullet_is_dark_2
    state: 'off'
  - condition: state
    entity_id: binary_sensor.g4_instant_is_dark
    state: 'off'
  - condition: state
    entity_id: binary_sensor.g6_entry_is_dark
    state:
    - 'off'
  - condition: time
    after: 06:59:59
  - condition: numeric_state
    entity_id: sensor.garden_illuminance
    above: 50
  actions:
  - action: input_boolean.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: input_boolean.its_dark
  mode: single
- id: '1750400693755'
  alias: 'Blinds: Close 1st Landing when high temp'
  description: ''
  triggers:
  - trigger: numeric_state
    entity_id:
    - sensor.garden_temperature
    above: 25
  conditions:
  - condition: time
    before: '14:00:00'
  actions:
  - action: cover.close_cover
    target:
      device_id: d2f0b27730c64caf8645cb3a8fdef7d2
    data: {}
  mode: single
- id: '1752575617654'
  alias: 'Alarm: Known Face Detected'
  description: ''
  triggers:
  - allowed_methods:
    - POST
    - PUT
    local_only: true
    webhook_id: PPqqCpSheRAnjYVbviLMMtkf
    trigger: webhook
  conditions:
  - condition: or
    conditions:
    - condition: template
      value_template: '{{ trigger.json.alarm.triggers[0].value == ''Chris Allen''
        }}'
    - condition: template
      value_template: '{{ trigger.json.alarm.triggers[0].value == ''Karen Meen'' }}'
    - condition: template
      value_template: '{{ trigger.json.alarm.triggers[0].value == ''Hannah Vaugon''
        }}'
    - condition: template
      value_template: '{{ trigger.json.alarm.triggers[0].value == ''Adrian Chapman''
        }}'
  actions:
  - data:
      title: '{{ trigger.payload_json.alarm.name }}

        '
      message: 'Face detected: {{ trigger.payload_json.alarm.triggers[0].value }}

        '
    action: notify.mobile_app_sm_s926b
  mode: single
- id: '1752580862564'
  alias: Renew Let's Encrypt Certificate
  description: ''
  use_blueprint:
    path: TJ-developer/renew_ssl_cert.yaml
    input:
      cert_expiry_sensor: sensor.hassio_x1ade_co_uk_cert_expiry
      time_to_check_cert: 01:00:00
      send_notification: true
      notification_device: 1e8ec609981b6bbb5877a4865e4503be
      notification_title: Certificate Renewed
      notification_message: hassio Let's Encrypt certificate renewed
- id: '1752671614184'
  alias: New automation
  description: ''
  triggers:
  - trigger: webhook
    allowed_methods:
    - POST
    - PUT
    local_only: true
    webhook_id: PPqqCpSheRAnjYVbviLMMtkf
  conditions: []
  actions:
  - action: persistent_notification.create
    metadata: {}
    data:
      message: ' {% if trigger.get(''data'') %}             Data: {{ trigger.data
        | tojson }}           {% elif trigger.get(''json'') %}             JSON: {{
        trigger.json | tojson }}           {% endif %}           {% if trigger.get(''query'')
        and trigger.query | length > 0 %}             Query: {{ trigger.query | tojson
        }}           {% endif %}'
  mode: single
- id: '1752672409794'
  alias: UniFi AI Face Alarm Trigger
  description: ''
  triggers:
  - trigger: webhook
    allowed_methods:
    - POST
    - PUT
    local_only: true
    webhook_id: fB8RAOfbQC8HmxnrfJOBd__F
  conditions: []
  actions:
  - action: persistent_notification.create
    metadata: {}
    data:
      title: UniFi Face Detection
      notification_id: unifi_face_alarm
      message: '          {% set alarm = trigger.json.alarm %}           {% set triggers
        = alarm.triggers %}           {% set detected = triggers | map(attribute=''key'')
        | list %}           Detected: {{ detected | join('', '') }}           Timestamp:
        {{ trigger.json.timestamp }}           Alarm Name: {{ alarm.name }}'
  mode: single
- id: '1754305740765'
  alias: Reset auto override when garden light turns off
  description: ''
  triggers:
  - type: not_occupied
    device_id: 9e1542f5b60ee3aa673c5d1e428f5f5e
    entity_id: 6b916e72812c6aa214240d3785d8433f
    domain: binary_sensor
    trigger: device
    for:
      hours: 0
      minutes: 3
      seconds: 0
  actions:
  - action: input_boolean.turn_off
    data: {}
    target:
      entity_id: input_boolean.garden_light_auto_override
  mode: single
- id: '1209348756'
  alias: detect lights and adjust the brightness when turned on based on time
  description: ''
  triggers:
  - event_type: state_changed
    trigger: event
  conditions:
  - condition: and
    conditions:
    - condition: state
      entity_id: group.family
      state: home
    - condition: template
      value_template: '{{ trigger.event.data is not none }}'
    - condition: template
      value_template: '{{ trigger.event.data.entity_id is not none }}'
    - condition: template
      value_template: '{{ trigger.event.data.entity_id.split(''.'')[0] == ''light''
        }}'
    - condition: template
      value_template: '{{ trigger.event.data.entity_id.split(''_'')[0] != ''light.living_room_ceiling_light_switch''
        }}'
    - condition: template
      value_template: '{{ trigger.event.data.old_state.attributes[''is_hue_group'']
        != true }}'
    - condition: template
      value_template: '{{ trigger.event.data.old_state.state == ''off'' }}'
    - condition: template
      value_template: '{{ trigger.event.data.new_state.state == ''on'' }}'
  actions:
  - data_template:
      entity_id: '{{ trigger.event.data.entity_id }}'
      brightness: "{% set hour=states(\"sensor.time\").split(':')[0] | int %} {% set
        dayOfWeek=now().weekday()  %} {%- if hour >= 0 and hour < 7 and dayOfWeek
        in [0,1,2,3,4,5,6] -%}\n  15\n{%- elif hour >= 7 and hour < 9 and dayOfWeek
        in [0,1,2,3,4,5,6] -%}\n  75\n{%- elif hour >= 9 and hour < 22 and dayOfWeek
        in [0,1,2,3,4,5,6] -%}\n  100\n{%- elif hour >= 23 and hour < 24 and dayOfWeek
        in [0,1,2,3,4,5,6] -%}\n  50\n{%- else -%}\n  1\n{%- endif %}"
    action: light.turn_on
  mode: single
- id: '1754744381291'
  alias: Free Electricity - Turn on Immersion
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - binary_sensor.octopus_energy_a_038dd11d_octoplus_free_electricity_session
    from: 'off'
    to: 'on'
  conditions: []
  actions:
  - type: turn_on
    device_id: 843dcc5e38140b853b397f677b12aea9
    entity_id: 7d3034c4be11e46e8bd0dcc6d42eee46
    domain: switch
  mode: single
- id: '1754921228807'
  alias: Voice - Weather Forecast - Local Assist Blueprint
  description: ''
  use_blueprint:
    path: TheFes/1_voice_weather_forecast_local.yaml
    input:
      weather_entity: weather.openweathermap
      sunday:
      - sunday
- id: '1756712562226'
  alias: Free Electricity - Turn off Immersion
  description: ''
  triggers:
  - trigger: state
    entity_id:
    - binary_sensor.octopus_energy_a_038dd11d_octoplus_free_electricity_session
    from: 'on'
    to: 'off'
  conditions: []
  actions:
  - type: turn_off
    device_id: 843dcc5e38140b853b397f677b12aea9
    entity_id: 7d3034c4be11e46e8bd0dcc6d42eee46
    domain: switch
  mode: single
- id: '1759306540400'
  alias: Voice - Weather Forecast - Local Assist Blueprint
  description: ''
  use_blueprint:
    path: TheFes/1_voice_weather_forecast_local.yaml
    input:
      weather_entity: weather.openweathermap
- id: assist_alarmtimereached
  alias: Assist - AlarmTimeReached
  description: Assist automation when set alarm time is reached.
  triggers:
  - value_template: '{{ as_timestamp(states.input_datetime.assist_alarmtime.state)
      | round == as_timestamp(now()) | round  }}  '
    alias: Time equals set alarm
    trigger: template
  conditions:
  - condition: state
    entity_id: input_boolean.assist_alarm
    state: 'on'
    alias: Alarm is set
  actions:
  - alias: Set variables
    variables:
      alarm_target: "{%- if settings.get('alarm_target')[:13] == \"media_player.\"
        %}\n{{- settings.get('alarm_target') }}\n{%- elif (settings.get('alarm_target')[:7]
        == \"sensor.\" or settings.get('alarm_target')[:11] == \"input_text.\") and
        (states(settings.get('alarm_target'))[:13] == \"media_player.\") %}\n{{- states(settings.get('alarm_target'))
        }}\n{%- elif (settings.get('alarm_target')[:7] == \"sensor.\" or settings.get('alarm_target')[:11]
        == \"input_text.\") and (states(settings.get('alarm_target')) == \"\") %}\n{{-
        settings.get('timer_target_default') }}\n{%- else %}\n{%- set media_player_list
        = states.media_player | map(attribute='entity_id') | list %}\n{%- if \"sensor.\"
        in settings.get('alarm_target') or \"input_text.\" in settings.get('alarm_target')
        %}\n{%- set target_area = states(settings.get('alarm_target')) %}\n{%- else
        %}\n{%- set target_area = settings.get('alarm_target') %}\n{%- endif %}        \n{%-
        for entity_id in media_player_list %}\n{%- if area_name(entity_id) | lower
        == target_area | lower %}\n- {{ entity_id }}\n{%- endif %}\n{%- endfor %}\n{%-
        endif %}  \n"
      alarm_tts: '{{ settings.get(''alarm_tts'') }}'
      tts_service: '{{ settings.get(''tts_service'') }}'
      tts_message: '{{ settings.get(''tts_message'') }}'
      media_location: '{{ settings.get(''media_location'') }}'
      lights_turn_on: '{{ settings.get(''lights_turn_on'') }}'
      lights_delay: '{{ settings.get(''lights_delay'') }}'
      lights: '{{ settings.get(''lights'') }}'
  - alias: Disable wakeword
    data:
      entity_id: switch.bedroom_4_child_lock
    action: switch.turn_off
  - alias: Media file or TTS
    choose:
    - conditions:
      - alias: Alarm is a media file
        condition: template
        value_template: '{{ alarm_tts == false }}'
      sequence:
      - alias: Play media
        target:
          entity_id: '{% if ''sensor.'' in alarm_target %} states(alarm_target) {%
            else %} {{ alarm_target }} {% endif %}'
        data:
          announce: true
          media:
            media_content_id: '{{ media_location }}'
            media_content_type: music
            metadata: {}
        enabled: true
        action: media_player.play_media
      alias: Media file
    default:
    - data:
        cache: true
        entity_id: '{% if ''sensor.'' in alarm_target %} {{ states(alarm_target)}}
          {% else %} {{ alarm_target }} {% endif %}'
        message: '{% if ''sensor.'' in tts_message %} states(tts_message) {% else
          %} {{ tts_message }} {% endif %}'
      alias: TTS
      action: '{{ tts_service }}'
  - metadata: {}
    data: {}
    target:
      entity_id: input_boolean.assist_alarm
    alias: Turn off alarm boolean
    action: input_boolean.turn_off
  - alias: Turn on wakeword
    data:
      entity_id: switch.bedroom_4_child_lock
    action: switch.turn_on
  - alias: Turn on light(s) if set to true
    choose:
    - conditions:
      - condition: template
        value_template: '{{ lights_turn_on == true }}'
        alias: Lights_turn_on is true
      sequence:
      - delay:
          seconds: '{% if lights_delay is defined %} {{ lights_delay }} {% else %}
            5 {% endif %}'
        alias: Delay lights turning on
      - target:
          entity_id: '{{ lights }}'
        alias: Turn on lights
        action: light.turn_on
      alias: Lights_turn_on is true
  variables:
    settings:
      alarm_target: bedroom
      alarm_target_default: media_player.bedroom
      alarm_tts: true
      tts_service: tts.cloud_say
      tts_message: Goodmorning sunshine! Time to get up!
      media_location: /media/local/wakeup.mp3
      lights_turn_on: true
      lights_delay: 5
      lights:
      - light.slaapkamer
  mode: single
- id: '1764258668126'
  alias: CalcioLive - Notification 15 minutes before the Arsenal match
  description: Send a notification to your mobile phone 15 minutes before the match
    starts.
  triggers:
  - value_template: '{{ (as_timestamp(strptime(state_attr(''sensor.calciolive_next_eng_1_arsenal'',
      ''matches'')[0].date, ''%d/%m/%Y %H:%M'')) - 900) | timestamp_custom(''%Y-%m-%d
      %H:%M'') == now().strftime(''%Y-%m-%d %H:%M'') }}

      '
    trigger: template
  conditions:
  - condition: template
    value_template: '{{ state_attr(''sensor.calciolive_next_eng_1_arsenal'', ''matches'')[0].state
      == ''pre'' }}

      '
  actions:
  - data:
      title: Arsenal - Match Reminder
      message: 'The match between {{ state_attr(''sensor.calciolive_next_eng_1_arsenal'',
        ''matches'')[0].home_team }} v {{ state_attr(''sensor.calciolive_next_eng_1_arsenal'',
        ''matches'')[0].away_team }} will start in 15 minutes!

        '
      data:
        image: '{{ state_attr(''sensor.calciolive_next_eng_1_arsenal'', ''team_logo'')
          }}

          '
    action: notify.email_cv28
  - data:
      title: Arsenal - Match Reminder
      message: 'The match between {{ state_attr(''sensor.calciolive_next_eng_1_arsenal'',
        ''matches'')[0].home_team }} v {{ state_attr(''sensor.calciolive_next_eng_1_arsenal'',
        ''matches'')[0].away_team }} will start in 15 minutes!

        '
      data:
        image: '{{ state_attr(''sensor.calciolive_next_eng_1_arsenal'', ''team_logo'')
          }}

          '
    action: notify.mobile_app_sm_s926b
  mode: single
- id: '1764259012130'
  alias: CalcioLive - Arsenal Goal Notification with Minutes and Player
  description: Sends a notification for every goal scored, including penalties.
  triggers:
  - value_template: "{% for event in state_attr('sensor.calciolive_next_eng_1_arsenal',
      'matches')[0].match_details %}\n  {% if 'Goal' in event or 'Penalty' in event
      %}\n    true\n  {% endif %}\n{% endfor %}\n"
    trigger: template
    id: epl
  - value_template: "{% for event in state_attr('sensor.calciolive_next_uefa_champions_arsenal',
      'matches')[0].match_details %}\n  {% if 'Goal' in event or 'Penalty' in event
      %}\n    true\n  {% endif %}\n{% endfor %}\n"
    trigger: template
    id: cl
  - value_template: "{% for event in state_attr('sensor.calciolive_next_eng_league_cup_arsenal',
      'matches')[0].match_details %}\n  {% if 'Goal' in event or 'Penalty' in event
      %}\n    true\n  {% endif %}\n{% endfor %}\n"
    trigger: template
    id: lc
  - value_template: "{% for event in state_attr('sensor.calciolive_next_eng_fa_arsenal',
      'matches')[0].match_details %}\n  {% if 'Goal' in event or 'Penalty' in event
      %}\n    true\n  {% endif %}\n{% endfor %}\n"
    trigger: template
    id: fac
  conditions: []
  actions:
  - variables:
      epl_match_details: '{{ state_attr(''sensor.calciolive_next_eng_1_arsenal'',
        ''matches'')[0].match_details }}'
      cl_match_details: '{{ state_attr(''sensor.calciolive_next_uefa_champions_arsenal'',
        ''matches'')[0].match_details }}'
      fac_match_details: '{{ state_attr(''sensor.calciolive_next_eng_fa_arsenal'',
        ''matches'')[0].match_details }}'
      lc_match_details: '{{ state_attr(''sensor.calciolive_next_eng_league_cup_arsenal'',
        ''matches'')[0].match_details }}'
    enabled: false
  - repeat:
      for_each: '{{ match_details }}'
      sequence:
      - variables:
          event: '{{ repeat.item }}'
      - choose:
        - conditions:
          - condition: template
            value_template: '{{ ''Goal'' in event or ''Penalty'' in event }}

              '
          sequence:
          - if:
            - condition: trigger
              id:
              - epl
            then:
            - data_template:
                title: 'Match {{ state_attr(''sensor.calciolive_next_eng_1_arsenal'',
                  ''matches'')[0].home_team }} vs {{ state_attr(''sensor.calciolive_next_eng_1_arsenal'',
                  ''matches'')[0].away_team }}

                  '
                message: '{% set tipo = ''Penalty scored by'' if ''Penalty'' in event
                  else ''Goal scored by'' %} {% set minuto = event.split("''")[0].split("-")[-1].strip()
                  %} {% set giocatore = event.split("'': ")[1].strip() %}  {{ tipo
                  }} {{ giocatore }} at minute {{ minuto }}!

                  '
              action: notify.email_cv28
            - data_template:
                title: 'Match {{ state_attr(''sensor.calciolive_next_eng_1_arsenal'',
                  ''matches'')[0].home_team }} vs {{ state_attr(''sensor.calciolive_next_eng_1_arsenal'',
                  ''matches'')[0].away_team }}

                  '
                message: '{% set tipo = ''Penalty scored by'' if ''Penalty'' in event
                  else ''Goal scored by'' %} {% set minuto = event.split("''")[0].split("-")[-1].strip()
                  %} {% set giocatore = event.split("'': ")[1].strip() %}  {{ tipo
                  }} {{ giocatore }} at minute {{ minuto }}!

                  '
              action: notify.email_alert
            - data_template:
                title: 'Match {{ state_attr(''sensor.calciolive_next_eng_1_arsenal'',
                  ''matches'')[0].home_team }} vs {{ state_attr(''sensor.calciolive_next_eng_1_arsenal'',
                  ''matches'')[0].away_team }}

                  '
                message: '{% set tipo = ''Penalty scored by'' if ''Penalty'' in event
                  else ''Goal scored by'' %} {% set minuto = event.split("''")[0].split("-")[-1].strip()
                  %} {% set giocatore = event.split("'': ")[1].strip() %}  {{ tipo
                  }} {{ giocatore }} at minute {{ minuto }}!

                  '
              action: notify.mobile_app_sm_s926b
          - if:
            - condition: trigger
              id:
              - cl
            then:
            - data_template:
                title: 'Match {{ state_attr(''sensor.calciolive_next_uefa_champions_arsenal'',
                  ''matches'')[0].home_team }} vs {{ state_attr(''sensor.calciolive_next_uefa_champions_arsenal'',
                  ''matches'')[0].away_team }}

                  '
                message: '{% set tipo = ''Penalty scored by'' if ''Penalty'' in event
                  else ''Goal scored by'' %} {% set minuto = event.split("''")[0].split("-")[-1].strip()
                  %} {% set giocatore = event.split("'': ")[1].strip() %}  {{ tipo
                  }} {{ giocatore }} at minute {{ minuto }}!

                  '
              action: notify.email_cv28
            - data_template:
                title: 'Match {{ state_attr(''sensor.calciolive_next_uefa_champions_arsenal'',
                  ''matches'')[0].home_team }} vs {{ state_attr(''sensor.calciolive_next_uefa_champions_arsenal'',
                  ''matches'')[0].away_team }}

                  '
                message: '{% set tipo = ''Penalty scored by'' if ''Penalty'' in event
                  else ''Goal scored by'' %} {% set minuto = event.split("''")[0].split("-")[-1].strip()
                  %} {% set giocatore = event.split("'': ")[1].strip() %}  {{ tipo
                  }} {{ giocatore }} at minute {{ minuto }}!

                  '
              action: notify.email_alert
            - data_template:
                title: 'Match {{ state_attr(''sensor.calciolive_next_uefa_champions_arsenal'',
                  ''matches'')[0].home_team }} vs {{ state_attr(''sensor.calciolive_next_uefa_champions_arsenal'',
                  ''matches'')[0].away_team }}

                  '
                message: '{% set tipo = ''Penalty scored by'' if ''Penalty'' in event
                  else ''Goal scored by'' %} {% set minuto = event.split("''")[0].split("-")[-1].strip()
                  %} {% set giocatore = event.split("'': ")[1].strip() %}  {{ tipo
                  }} {{ giocatore }} at minute {{ minuto }}!

                  '
              action: notify.mobile_app_sm_s926b
          - if:
            - condition: trigger
              id:
              - lc
            then:
            - data_template:
                title: 'Match {{ state_attr(''sensor.calciolive_next_eng_league_cup_arsenal'',
                  ''matches'')[0].home_team }} vs {{ state_attr(''sensor.calciolive_next_eng_league_cup_arsenal'',
                  ''matches'')[0].away_team }}

                  '
                message: '{% set tipo = ''Penalty scored by'' if ''Penalty'' in event
                  else ''Goal scored by'' %} {% set minuto = event.split("''")[0].split("-")[-1].strip()
                  %} {% set giocatore = event.split("'': ")[1].strip() %}  {{ tipo
                  }} {{ giocatore }} at minute {{ minuto }}!

                  '
              action: notify.mobile_app_sm_s926b
            - data_template:
                title: 'Match {{ state_attr(''sensor.calciolive_next_eng_league_cup_arsenal'',
                  ''matches'')[0].home_team }} vs {{ state_attr(''sensor.calciolive_next_eng_league_cup_arsenal'',
                  ''matches'')[0].away_team }}

                  '
                message: '{% set tipo = ''Penalty scored by'' if ''Penalty'' in event
                  else ''Goal scored by'' %} {% set minuto = event.split("''")[0].split("-")[-1].strip()
                  %} {% set giocatore = event.split("'': ")[1].strip() %}  {{ tipo
                  }} {{ giocatore }} at minute {{ minuto }}!

                  '
              action: notify.email_cv28
            - data_template:
                title: 'Match {{ state_attr(''sensor.calciolive_next_eng_league_cup_arsenal'',
                  ''matches'')[0].home_team }} vs {{ state_attr(''sensor.calciolive_next_eng_league_cup_arsenal'',
                  ''matches'')[0].away_team }}

                  '
                message: '{% set tipo = ''Penalty scored by'' if ''Penalty'' in event
                  else ''Goal scored by'' %} {% set minuto = event.split("''")[0].split("-")[-1].strip()
                  %} {% set giocatore = event.split("'': ")[1].strip() %}  {{ tipo
                  }} {{ giocatore }} at minute {{ minuto }}!

                  '
              action: notify.email_alert
          - if:
            - condition: trigger
              id:
              - fac
            then:
            - data_template:
                title: 'Match {{ state_attr(''sensor.calciolive_next_eng_fa_arsenal'',
                  ''matches'')[0].home_team }} vs {{ state_attr(''sensor.calciolive_next_eng_fa_arsenal'',
                  ''matches'')[0].away_team }}

                  '
                message: '{% set tipo = ''Penalty scored by'' if ''Penalty'' in event
                  else ''Goal scored by'' %} {% set minuto = event.split("''")[0].split("-")[-1].strip()
                  %} {% set giocatore = event.split("'': ")[1].strip() %}  {{ tipo
                  }} {{ giocatore }} at minute {{ minuto }}!

                  '
              action: notify.mobile_app_sm_s926b
            - data_template:
                title: 'Match {{ state_attr(''sensor.calciolive_next_eng_league_cup_arsenal'',
                  ''matches'')[0].home_team }} vs {{ state_attr(''sensor.calciolive_next_eng_league_cup_arsenal'',
                  ''matches'')[0].away_team }}

                  '
                message: '{% set tipo = ''Penalty scored by'' if ''Penalty'' in event
                  else ''Goal scored by'' %} {% set minuto = event.split("''")[0].split("-")[-1].strip()
                  %} {% set giocatore = event.split("'': ")[1].strip() %}  {{ tipo
                  }} {{ giocatore }} at minute {{ minuto }}!

                  '
              action: notify.email_cv28
            - data_template:
                title: 'Match {{ state_attr(''sensor.calciolive_next_eng_league_cup_arsenal'',
                  ''matches'')[0].home_team }} vs {{ state_attr(''sensor.calciolive_next_eng_league_cup_arsenal'',
                  ''matches'')[0].away_team }}

                  '
                message: '{% set tipo = ''Penalty scored by'' if ''Penalty'' in event
                  else ''Goal scored by'' %} {% set minuto = event.split("''")[0].split("-")[-1].strip()
                  %} {% set giocatore = event.split("'': ")[1].strip() %}  {{ tipo
                  }} {{ giocatore }} at minute {{ minuto }}!

                  '
              action: notify.email_alert
    enabled: false
  - if:
    - condition: trigger
      id:
      - epl
    then:
    - variables:
        epl_match_details: '{{ state_attr(''sensor.calciolive_next_eng_1_arsenal'',
          ''matches'')[0].match_details }}'
    - repeat:
        for_each: '{{ epl_match_details }}'
        sequence:
        - variables:
            event: '{{ repeat.item }}'
        - choose:
          - conditions:
            - condition: template
              value_template: '{{ ''Goal'' in event or ''Penalty'' in event }}'
            sequence:
            - data_template:
                title: 'Match {{ state_attr(''sensor.calciolive_next_eng_1_arsenal'',
                  ''matches'')[0].home_team }} vs {{ state_attr(''sensor.calciolive_next_eng_1_arsenal'',
                  ''matches'')[0].away_team }}

                  '
                message: '{% set tipo = ''Penalty scored by'' if ''Penalty'' in event
                  else ''Goal scored by'' %} {% set minuto = event.split("''")[0].split("-")[-1].strip()
                  %} {% set giocatore = event.split("'': ")[1].strip() %}  {{ tipo
                  }} {{ giocatore }} at minute {{ minuto }}!

                  '
              action: notify.email_cv28
            - data_template:
                title: 'Match {{ state_attr(''sensor.calciolive_next_eng_1_arsenal'',
                  ''matches'')[0].home_team }} vs {{ state_attr(''sensor.calciolive_next_eng_1_arsenal'',
                  ''matches'')[0].away_team }}

                  '
                message: '{% set tipo = ''Penalty scored by'' if ''Penalty'' in event
                  else ''Goal scored by'' %} {% set minuto = event.split("''")[0].split("-")[-1].strip()
                  %} {% set giocatore = event.split("'': ")[1].strip() %}  {{ tipo
                  }} {{ giocatore }} at minute {{ minuto }}!

                  '
              action: notify.email_alert
            - data_template:
                title: 'Match {{ state_attr(''sensor.calciolive_next_eng_1_arsenal'',
                  ''matches'')[0].home_team }} vs {{ state_attr(''sensor.calciolive_next_eng_1_arsenal'',
                  ''matches'')[0].away_team }}

                  '
                message: '{% set tipo = ''Penalty scored by'' if ''Penalty'' in event
                  else ''Goal scored by'' %} {% set minuto = event.split("''")[0].split("-")[-1].strip()
                  %} {% set giocatore = event.split("'': ")[1].strip() %}  {{ tipo
                  }} {{ giocatore }} at minute {{ minuto }}!

                  '
              action: notify.mobile_app_sm_s926b
  - if:
    - condition: trigger
      id:
      - cl
    then:
    - variables:
        cl_match_details: '{{ state_attr(''sensor.calciolive_next_uefa_champions_arsenal'',
          ''matches'')[0].match_details }}'
    - repeat:
        for_each: '{{ cl_match_details }}'
        sequence:
        - variables:
            event: '{{ repeat.item }}'
        - choose:
          - conditions:
            - condition: template
              value_template: '{{ ''Goal'' in event or ''Penalty'' in event }}'
            sequence:
            - data_template:
                title: 'Match {{ state_attr(''sensor.calciolive_next_uefa_champions_arsenal'',
                  ''matches'')[0].home_team }} vs {{ state_attr(''sensor.calciolive_next_uefa_champions_arsenal'',
                  ''matches'')[0].away_team }}

                  '
                message: '{% set tipo = ''Penalty scored by'' if ''Penalty'' in event
                  else ''Goal scored by'' %} {% set minuto = event.split("''")[0].split("-")[-1].strip()
                  %} {% set giocatore = event.split("'': ")[1].strip() %}  {{ tipo
                  }} {{ giocatore }} at minute {{ minuto }}!

                  '
              action: notify.email_cv28
            - data_template:
                title: 'Match {{ state_attr(''sensor.calciolive_next_uefa_champions_arsenal'',
                  ''matches'')[0].home_team }} vs {{ state_attr(''sensor.calciolive_next_uefa_champions_arsenal'',
                  ''matches'')[0].away_team }}

                  '
                message: '{% set tipo = ''Penalty scored by'' if ''Penalty'' in event
                  else ''Goal scored by'' %} {% set minuto = event.split("''")[0].split("-")[-1].strip()
                  %} {% set giocatore = event.split("'': ")[1].strip() %}  {{ tipo
                  }} {{ giocatore }} at minute {{ minuto }}!

                  '
              action: notify.email_alert
            - data_template:
                title: 'Match {{ state_attr(''sensor.calciolive_next_uefa_champions_arsenal'',
                  ''matches'')[0].home_team }} vs {{ state_attr(''sensor.calciolive_next_uefa_champions_arsenal'',
                  ''matches'')[0].away_team }}

                  '
                message: '{% set tipo = ''Penalty scored by'' if ''Penalty'' in event
                  else ''Goal scored by'' %} {% set minuto = event.split("''")[0].split("-")[-1].strip()
                  %} {% set giocatore = event.split("'': ")[1].strip() %}  {{ tipo
                  }} {{ giocatore }} at minute {{ minuto }}!

                  '
              action: notify.mobile_app_sm_s926b
  - if:
    - condition: trigger
      id:
      - lc
    then:
    - variables:
        lc_match_details: '{{ state_attr(''sensor.calciolive_next_eng_league_cup_arsenal'',
          ''matches'')[0].match_details }}'
    - repeat:
        for_each: '{{ lc_match_details }}'
        sequence:
        - variables:
            event: '{{ repeat.item }}'
        - choose:
          - conditions:
            - condition: template
              value_template: '{{ ''Goal'' in event or ''Penalty'' in event }}'
            sequence:
            - data_template:
                title: 'Match {{ state_attr(''sensor.calciolive_next_eng_league_cup_arsenal'',
                  ''matches'')[0].home_team }} vs {{ state_attr(''sensor.calciolive_next_eng_league_cup_arsenal'',
                  ''matches'')[0].away_team }}

                  '
                message: '{% set tipo = ''Penalty scored by'' if ''Penalty'' in event
                  else ''Goal scored by'' %} {% set minuto = event.split("''")[0].split("-")[-1].strip()
                  %} {% set giocatore = event.split("'': ")[1].strip() %}  {{ tipo
                  }} {{ giocatore }} at minute {{ minuto }}!

                  '
              action: notify.email_cv28
            - data_template:
                title: 'Match {{ state_attr(''sensor.calciolive_next_eng_league_cup_arsenal'',
                  ''matches'')[0].home_team }} vs {{ state_attr(''sensor.calciolive_next_eng_league_cup_arsenal'',
                  ''matches'')[0].away_team }}

                  '
                message: '{% set tipo = ''Penalty scored by'' if ''Penalty'' in event
                  else ''Goal scored by'' %} {% set minuto = event.split("''")[0].split("-")[-1].strip()
                  %} {% set giocatore = event.split("'': ")[1].strip() %}  {{ tipo
                  }} {{ giocatore }} at minute {{ minuto }}!

                  '
              action: notify.email_alert
            - data_template:
                title: 'Match {{ state_attr(''sensor.calciolive_next_eng_league_cup_arsenal'',
                  ''matches'')[0].home_team }} vs {{ state_attr(''sensor.calciolive_next_eng_league_cup_arsenal'',
                  ''matches'')[0].away_team }}

                  '
                message: '{% set tipo = ''Penalty scored by'' if ''Penalty'' in event
                  else ''Goal scored by'' %} {% set minuto = event.split("''")[0].split("-")[-1].strip()
                  %} {% set giocatore = event.split("'': ")[1].strip() %}  {{ tipo
                  }} {{ giocatore }} at minute {{ minuto }}!

                  '
              action: notify.mobile_app_sm_s926b
  - if:
    - condition: trigger
      id:
      - fac
    then:
    - variables:
        fac_match_details: '{{ state_attr(''sensor.calciolive_next_eng_fa_arsenal'',
          ''matches'')[0].match_details }}'
    - repeat:
        for_each: '{{ fac_match_details }}'
        sequence:
        - variables:
            event: '{{ repeat.item }}'
        - choose:
          - conditions:
            - condition: template
              value_template: '{{ ''Goal'' in event or ''Penalty'' in event }}'
            sequence:
            - data_template:
                title: 'Match {{ state_attr(''sensor.calciolive_next_eng_fa_arsenal'',
                  ''matches'')[0].home_team }} vs {{ state_attr(''sensor.calciolive_next_eng_fa_arsenal'',
                  ''matches'')[0].away_team }}

                  '
                message: '{% set tipo = ''Penalty scored by'' if ''Penalty'' in event
                  else ''Goal scored by'' %} {% set minuto = event.split("''")[0].split("-")[-1].strip()
                  %} {% set giocatore = event.split("'': ")[1].strip() %}  {{ tipo
                  }} {{ giocatore }} at minute {{ minuto }}!

                  '
              action: notify.email_cv28
            - data_template:
                title: 'Match {{ state_attr(''sensor.calciolive_next_eng_fa_arsenal'',
                  ''matches'')[0].home_team }} vs {{ state_attr(''sensor.calciolive_next_eng_fa_arsenal'',
                  ''matches'')[0].away_team }}

                  '
                message: '{% set tipo = ''Penalty scored by'' if ''Penalty'' in event
                  else ''Goal scored by'' %} {% set minuto = event.split("''")[0].split("-")[-1].strip()
                  %} {% set giocatore = event.split("'': ")[1].strip() %}  {{ tipo
                  }} {{ giocatore }} at minute {{ minuto }}!

                  '
              action: notify.email_alert
            - data_template:
                title: 'Match {{ state_attr(''sensor.calciolive_next_eng_fa_arsenal'',
                  ''matches'')[0].home_team }} vs {{ state_attr(''sensor.calciolive_next_eng_fa_arsenal'',
                  ''matches'')[0].away_team }}

                  '
                message: '{% set tipo = ''Penalty scored by'' if ''Penalty'' in event
                  else ''Goal scored by'' %} {% set minuto = event.split("''")[0].split("-")[-1].strip()
                  %} {% set giocatore = event.split("'': ")[1].strip() %}  {{ tipo
                  }} {{ giocatore }} at minute {{ minuto }}!

                  '
              action: notify.mobile_app_sm_s926b
  mode: queued
- id: '1765368898448'
  alias: 'Notify: Bin Collections (Black Bin Tomorrow)'
  description: ''
  triggers:
  - value_template: '{{ state_attr(''sensor.harlow_non_recycling'', ''days'') | int(99)
      == 1 }}

      '
    trigger: template
    id: black_bin
  conditions: []
  actions:
  - variables:
      due_date: '{% set d = state_attr(''sensor.harlow_non_recycling'', ''next_collection'')
        %}'
      friendly_date: '{{ as_timestamp(due_dt) | timestamp_custom(''%a %d %b'', true)
        }}'
  - data:
      title: Bin Collection
      message: Black Bin is being collected tomorrow ({{ friendly_date }})
    action: notify.mobile_app_sm_s926b
  - action: notify.mobile_app_hannahs_iphone_11
    data:
      message: Black Bin is being collected tomorrow ({{ friendly_date }})
      title: Bin Collection
  mode: single
- id: '1765987206061'
  alias: 'Notify: Send message if waste will be collected tomorrow'
  description: ''
  triggers:
  - trigger: time
    at: '19:00:00'
  conditions:
  - condition: state
    entity_id: sensor.upcoming_waste
    attribute: daysTo
    state: 1
  actions:
  - action: notify.mobile_app_sm_s926b
    metadata: {}
    data:
      message: Tomorrow, {{ states('sensor.waste_tomorrow') }} will be picked up.
  - action: notify.mobile_app_hannahs_iphone_11
    metadata: {}
    data:
      message: Tomorrow, {{ states('sensor.waste_tomorrow') }} will be picked up.
  mode: single
- id: '1766481887980'
  alias: 'Xmas: Turn off lights'
  description: ''
  triggers:
  - trigger: time
    at: '22:00:00'
  conditions:
  - condition: or
    conditions:
    - condition: device
      type: is_on
      device_id: 74bcd8b68e2df943d4b0c6101c8656cb
      entity_id: 06b28ebbc13a817aef2dd5827468c95d
      domain: switch
    - condition: device
      type: is_on
      device_id: 7d5e61c0c8600126739996ac019c4728
      entity_id: 911f893142ce5afa37c0bfd9b82a3c97
      domain: switch
  actions:
  - type: turn_off
    device_id: 74bcd8b68e2df943d4b0c6101c8656cb
    entity_id: 06b28ebbc13a817aef2dd5827468c95d
    domain: switch
  - type: turn_off
    device_id: 7d5e61c0c8600126739996ac019c4728
    entity_id: 911f893142ce5afa37c0bfd9b82a3c97
    domain: switch
  mode: single
- id: '1768320968573'
  alias: Arsenal FT League Cup
  description: ''
  triggers:
  - value_template: '{% set matches = state_attr(''sensor.calciolive_next_eng_league_cup_arsenal'',
      ''matches'') or [] %} {% if matches | length > 0 %} {% set s = (matches[0].status
      or '''') | lower %} {{ s in [''full time'',''ft'',''finished''] }} {% else %}
      {{ false }} {% endif %}'
    trigger: template
  actions:
  - data:
      title: 'Full Time: Arsenal - League Cup'
      message: "{% set matches = state_attr('sensor.calciolive_next_eng_league_cup_arsenal',
        'matches') or [] %} {% set m = matches[0] if matches | length > 0 else none
        %} {% if m %}\n  {{ m.home_team }} {{ m.home_score | int }} - {{ m.away_score
        | int }} {{ m.away_team }}\n{% else %}\n  No match data\n{% endif %}"
    action: notify.mobile_app_sm_s926b
- id: '1768321558268'
  alias: Arsenal FT EPL
  description: ''
  triggers:
  - value_template: '{% set matches = state_attr(''sensor.calciolive_next_eng_1_arsenal'',
      ''matches'') or [] %} {% if matches | length > 0 %} {% set s = (matches[0].status
      or '''') | lower %} {{ s in [''full time'',''ft'',''finished''] }} {% else %}
      {{ false }} {% endif %}'
    trigger: template
  conditions: []
  actions:
  - data:
      title: 'Full Time: Arsenal - League Cup'
      message: "{% set matches = state_attr('sensor.calciolive_next_eng_1_arsenal',
        'matches') or [] %} {% set m = matches[0] if matches | length > 0 else none
        %} {% if m %}\n  {{ m.home_team }} {{ m.home_score | int }} - {{ m.away_score
        | int }} {{ m.away_team }}\n{% else %}\n  No match data\n{% endif %}"
    action: notify.mobile_app_sm_s926b
  - action: notify.email_alert
    data:
      message: "{% set matches = state_attr('sensor.calciolive_next_eng_1_arsenal',
        'matches') or [] %} {% set m = matches[0] if matches | length > 0 else none
        %} {% if m %}\n  {{ m.home_team }} {{ m.home_score | int }} - {{ m.away_score
        | int }} {{ m.away_team }}\n{% else %}\n  No match data\n{% endif %}"
      title: Arsenal EPL Full Time Result
  - action: notify.email_cv28
    data:
      message: "{% set matches = state_attr('sensor.calciolive_next_eng_1_arsenal',
        'matches') or [] %} {% set m = matches[0] if matches | length > 0 else none
        %} {% if m %}\n  {{ m.home_team }} {{ m.home_score | int }} - {{ m.away_score
        | int }} {{ m.away_team }}\n{% else %}\n  No match data\n{% endif %}"
  mode: single
- id: '1768321720611'
  alias: Arsenal FT FAC
  description: ''
  triggers:
  - value_template: '{% set matches = state_attr(''sensor.calciolive_next_eng_fa_arsenal'',
      ''matches'') or [] %} {% if matches | length > 0 %} {% set s = (matches[0].status
      or '''') | lower %} {{ s in [''full time'',''ft'',''finished''] }} {% else %}
      {{ false }} {% endif %}'
    trigger: template
  conditions: []
  actions:
  - data:
      title: 'Full Time: Arsenal - League Cup'
      message: "{% set matches = state_attr('sensor.calciolive_next_eng_fa_arsenal',
        'matches') or [] %} {% set m = matches[0] if matches | length > 0 else none
        %} {% if m %}\n  {{ m.home_team }} {{ m.home_score | int }} - {{ m.away_score
        | int }} {{ m.away_team }}\n{% else %}\n  No match data\n{% endif %}"
    action: notify.mobile_app_sm_s926b
  - action: notify.email_alert
    data:
      message: "{% set matches = state_attr('sensor.calciolive_next_eng_fa_arsenal',
        'matches') or [] %} {% set m = matches[0] if matches | length > 0 else none
        %} {% if m %}\n  {{ m.home_team }} {{ m.home_score | int }} - {{ m.away_score
        | int }} {{ m.away_team }}\n{% else %}\n  No match data\n{% endif %}"
      title: 'Full Time: Arsenal FA Cup'
  - action: notify.email_cv28
    data:
      message: "{% set matches = state_attr('sensor.calciolive_next_eng_fa_arsenal',
        'matches') or [] %} {% set m = matches[0] if matches | length > 0 else none
        %} {% if m %}\n  {{ m.home_team }} {{ m.home_score | int }} - {{ m.away_score
        | int }} {{ m.away_team }}\n{% else %}\n  No match data\n{% endif %}"
      title: 'Full Time: Arsenal FA Cup'
  mode: single
- id: '1768321773285'
  alias: Arsenal FT CL
  description: ''
  triggers:
  - value_template: '{% set matches = state_attr(''sensor.calciolive_next_uefa_champions_arsenal'',
      ''matches'') or [] %} {% if matches | length > 0 %} {% set s = (matches[0].status
      or '''') | lower %} {{ s in [''full time'',''ft'',''finished''] }} {% else %}
      {{ false }} {% endif %}'
    trigger: template
  conditions: []
  actions:
  - data:
      title: 'Full Time: Arsenal - League Cup'
      message: "{% set matches = state_attr('sensor.calciolive_next_uefa_champions_arsenal',
        'matches') or [] %} {% set m = matches[0] if matches | length > 0 else none
        %} {% if m %}\n  {{ m.home_team }} {{ m.home_score | int }} - {{ m.away_score
        | int }} {{ m.away_team }}\n{% else %}\n  No match data\n{% endif %}"
    action: notify.mobile_app_sm_s926b
  - action: notify.email_alert
    data:
      message: "{% set matches = state_attr('sensor.calciolive_next_uefa_champions_arsenal',
        'matches') or [] %} {% set m = matches[0] if matches | length > 0 else none
        %} {% if m %}\n  {{ m.home_team }} {{ m.home_score | int }} - {{ m.away_score
        | int }} {{ m.away_team }}\n{% else %}\n  No match data\n{% endif %}"
      title: Arsenal CL Full Time Result
  - action: notify.email_cv28
    data:
      message: "{% set matches = state_attr('sensor.calciolive_next_uefa_champions_arsenal',
        'matches') or [] %} {% set m = matches[0] if matches | length > 0 else none
        %} {% if m %}\n  {{ m.home_team }} {{ m.home_score | int }} - {{ m.away_score
        | int }} {{ m.away_team }}\n{% else %}\n  No match data\n{% endif %}"
      title: Arsenal CL Full Time Result
  mode: single
- id: tado_pause_heating_notify_action
  alias: Tado - Pause heating on window open (notify + action)
  triggers:
  - entity_id:
    - binary_sensor.living_room_window
    - binary_sensor.bedroom_3_window
    - binary_sensor.bedroom_4_window
    - binary_sensor.bedroom_1_window
    - binary_sensor.bedroom_2_window
    - binary_sensor.kitchen_window
    to:
    - 'on'
    - 'off'
    for: 00:01:30
    trigger: state
  conditions:
  - condition: or
    conditions:
    - condition: state
      entity_id: climate.bedroom_1
      state:
      - heat
    - condition: state
      entity_id: climate.bedroom_2
      state:
      - heat
    - condition: state
      entity_id: climate.bedroom_3
      state:
      - heat
    - condition: state
      entity_id: climate.bedroom_4
      state:
      - heat
    - condition: state
      entity_id: climate.kitchen
      state:
      - heat
    - condition: state
      entity_id: climate.living_room
      state:
      - heat
  actions:
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ trigger.to_state.state == ''on'' }}'
      sequence:
      - condition: template
        value_template: '{{ states(zone_climate) not in [''unknown'',''unavailable'']
          and state_attr(zone_climate, ''hvac_mode'') != ''off'' and states(zone_climate)
          != ''off'' }}'
      - target:
          entity_id: '{{ zone_climate }}'
        action: climate.turn_off
        data: {}
      - data:
          title: Heating paused
          message: '{{ room_name }} window opened  heating turned off.'
          data:
            tag: '{{ notif_tag }}'
            actions:
            - action: RESUME_NOW
              title: Resume schedule now
            action_data:
              climate: '{{ zone_climate }}'
        action: notify.mobile_app_sm_s926b
      - data:
          title: Heating paused
          message: '{{ room_name }} window opened  heating turned off.'
          data:
            push:
              interruption-level: time-sensitive
            tag: '{{ notif_tag }}'
            actions:
            - action: RESUME_NOW
              title: Resume schedule now
            action_data:
              climate: '{{ zone_climate }}'
        action: notify.mobile_app_hannahs_iphone_11
    - conditions:
      - condition: template
        value_template: '{{ trigger.to_state.state == ''off'' }}'
      sequence:
      - condition: template
        value_template: '{{ states(zone_climate) not in [''unknown'',''unavailable'']
          }}'
      - target:
          entity_id: '{{ zone_climate }}'
        data:
          hvac_mode: heat
        action: climate.set_hvac_mode
      - choose:
        - conditions:
          - condition: template
            value_template: '{{ state_attr(zone_climate, ''hvac_mode'') != ''auto''
              }}'
          sequence:
          - target:
              entity_id: '{{ zone_climate }}'
            action: climate.turn_on
            data: {}
          - target:
              entity_id: '{{ zone_climate }}'
            data:
              hvac_mode: heat
            action: climate.set_hvac_mode
        default: []
      - data:
          title: Heating resumed
          message: '{{ room_name }} window closed  schedule set to Heat.'
          data:
            tag: '{{ notif_tag }}'
            actions:
            - action: RESUME_NOW
              title: Resume schedule now
            action_data:
              climate: '{{ zone_climate }}'
        action: notify.mobile_app_sm_s926b
      - data:
          title: Heating resumed
          message: '{{ room_name }} window closed  schedule set to Heat.'
          data:
            push:
              interruption-level: active
            tag: '{{ notif_tag }}'
            actions:
            - action: RESUME_NOW
              title: Resume schedule now
            action_data:
              climate: '{{ zone_climate }}'
        action: notify.mobile_app_hannahs_iphone_11
  mode: restart
  variables:
    zone_climate: '{{ ''climate.'' ~ trigger.entity_id.split(''.'')[1] | replace(''_window'','''')
      }}'
    room_name: '{{ (trigger.to_state.name or trigger.entity_id) | replace('' Window'','''')
      }}'
    notif_tag: tado_{{ trigger.entity_id.split('.')[1] }}
- id: tado_notification_action_resume_now
  alias: Tado - Notification action handler (Resume now)
  triggers:
  - event_type: mobile_app_notification_action
    event_data:
      action: RESUME_NOW
    trigger: event
  conditions:
  - condition: template
    value_template: '{{ trigger.event.data is defined and trigger.event.data.action_data
      is defined and trigger.event.data.action_data.climate is defined and states(trigger.event.data.action_data.climate)
      not in [''unknown'',''unavailable''] }}'
  actions:
  - target:
      entity_id: '{{ trigger.event.data.action_data.climate }}'
    data:
      hvac_mode: auto
    action: climate.set_hvac_mode
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ state_attr(trigger.event.data.action_data.climate, "hvac_mode")
          != "auto" }}'
      sequence:
      - target:
          entity_id: '{{ trigger.event.data.action_data.climate }}'
        action: climate.turn_on
      - target:
          entity_id: '{{ trigger.event.data.action_data.climate }}'
        data:
          hvac_mode: heat
        action: climate.set_hvac_mode
    default: []
  - data:
      title: Tado schedule resumed
      message: Action button pressed  set {{ trigger.event.data.action_data.climate
        }} to Auto.
      notification_id: tado_resume_now_feedback
    action: persistent_notification.create
  mode: parallel
  max: 10
- id: '1769937483245'
  alias: Voice assistant volume ducking
  description: ''
  use_blueprint:
    path: luka6000/HA_Voice_room_MP_volume.yaml
    input:
      assist: assist_satellite.home_assistant_voice_0963ba_assist_satellite
- id: '1769937537435'
  alias: Voice assistant volume ducking bedroom
  description: ''
  use_blueprint:
    path: luka6000/HA_Voice_room_MP_volume.yaml
    input:
      assist: assist_satellite.home_assistant_voice_093880_assist_satellite
